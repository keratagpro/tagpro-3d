{"version":3,"file":"tagpro-3d.user.js","sources":["../src/config/defaults.js","../src/vendor/Detector.js","../src/lib/clipper.js","../node_modules/lodash-es/_arrayPush.js","../node_modules/lodash-es/_baseProperty.js","../node_modules/lodash-es/_getLength.js","../node_modules/lodash-es/isObject.js","../node_modules/lodash-es/isFunction.js","../node_modules/lodash-es/isLength.js","../node_modules/lodash-es/isArrayLike.js","../node_modules/lodash-es/isObjectLike.js","../node_modules/lodash-es/isArrayLikeObject.js","../node_modules/lodash-es/isArguments.js","../node_modules/lodash-es/isArray.js","../node_modules/lodash-es/_baseFlatten.js","../node_modules/lodash-es/_arrayReduce.js","../node_modules/lodash-es/_basePick.js","../node_modules/lodash-es/_apply.js","../node_modules/lodash-es/toNumber.js","../node_modules/lodash-es/toInteger.js","../node_modules/lodash-es/rest.js","../node_modules/lodash-es/pick.js","../src/lib/utils.js","../src/lib/lights.js","../src/lib/models/bomb.json","../src/lib/objects/bomb.js","../src/lib/models/flagpole.json","../src/lib/cloth.js","../src/lib/objects/flag.js","../src/lib/objects/gate.js","../src/lib/objects/spike.js","../src/lib/object_manager.js","../src/lib/world.js","../src/main.js"],"sourcesContent":["import { TILE_SIZE } from 'tagpro';\r\nimport * as THREE from 'three';\r\n\r\nvar loader = new THREE.TextureLoader();\r\n\r\nexport default {\r\n\ttileSize: TILE_SIZE,\r\n\trenderer: {\r\n\t\tantialias: true,\r\n\t\talpha: true\r\n\t},\r\n\tcamera: {\r\n\t\tnear: 10,\r\n\t\tfar: 10000,\r\n\t\tdistance: 1000,\r\n\t},\r\n\tlights: [\r\n\t\t{ enabled: false, type: 'camera', color: 0xffffff, intensity: 0.8 },\r\n\t\t{ enabled: true, type: 'ambient', color: 0x666666 },\r\n\t\t{ enabled: true, type: 'directional', color: 0xffffff, intensity: 0.8, position: [-500, -500, -400] },\r\n\t],\r\n\tmaterials: {\r\n\t\tball: {\r\n\t\t\tdefault: {\r\n\t\t\t\tshiny: true,\r\n\t\t\t\tmap: loader.load('./3d/assets/textures/tile.png'),\r\n\t\t\t\tside: THREE.DoubleSide,\r\n\t\t\t},\r\n\t\t\tred: {\r\n\t\t\t\tcolor: 0xff0000\r\n\t\t\t},\r\n\t\t\tblue: {\r\n\t\t\t\tcolor: 0x0000ff\r\n\t\t\t},\r\n\t\t\toutline: {\r\n\t\t\t\tcolor: 0x000000,\r\n\t\t\t\tside: THREE.BackSide\r\n\t\t\t}\r\n\t\t},\r\n\t\tbomb: {\r\n\t\t\tdefault: {\r\n\t\t\t\tcolor: 0x000000\r\n\t\t\t},\r\n\t\t\tvisible: {\r\n\t\t\t\tvisible: true\r\n\t\t\t},\r\n\t\t\thidden: {\r\n\t\t\t\tvisible: false\r\n\t\t\t}\r\n\t\t},\r\n\t\tbutton: {\r\n\t\t\tshiny: true,\r\n\t\t\tcolor: 0xa06e32,\r\n\t\t},\r\n\t\tflag: {\r\n\t\t\tbase: {\r\n\t\t\t\tside: THREE.DoubleSide\r\n\t\t\t},\r\n\t\t\tcloth: {\r\n\r\n\t\t\t},\r\n\t\t\tblue: {\r\n\t\t\t\tcolor: 0x0000ff,\r\n\t\t\t},\r\n\t\t\tred: {\r\n\t\t\t\tcolor: 0xff0000,\r\n\t\t\t},\r\n\t\t\tyellow: {\r\n\t\t\t\tcolor: 0xffff00\r\n\t\t\t},\r\n\t\t},\r\n\t\tgate: {\r\n\t\t\tdefault: {\r\n\t\t\t\tshiny: true,\r\n\t\t\t\ttransparent: true,\r\n\t\t\t},\r\n\t\t\toff: {\r\n\t\t\t\tcolor: 0x000000,\r\n\t\t\t\topacity: 0.2,\r\n\t\t\t\twireframe: true\r\n\t\t\t},\r\n\t\t\tblue: {\r\n\t\t\t\tcolor: 0x0000ff,\r\n\t\t\t\topacity: 0.7,\r\n\t\t\t\twireframe: false\r\n\t\t\t},\r\n\t\t\tgreen: {\r\n\t\t\t\tcolor: 0x00ff00,\r\n\t\t\t\topacity: 0.7,\r\n\t\t\t\twireframe: false\r\n\t\t\t},\r\n\t\t\tred: {\r\n\t\t\t\tcolor: 0xff0000,\r\n\t\t\t\topacity: 0.7,\r\n\t\t\t\twireframe: false\r\n\t\t\t}\r\n\t\t},\r\n\t\tspike: {\r\n\t\t\tshiny: true,\r\n\t\t\tcolor: 0x666666,\r\n\t\t\topacity: 1\r\n\t\t},\r\n\t\twall: {\r\n\t\t\tshiny: true,\r\n\t\t\tcolor: 0x787878,\r\n\t\t\topacity: 0.95,\r\n\t\t\ttransparent: true\r\n\t\t},\r\n\t},\r\n\tobjects: {\r\n\t\tball: {\r\n\t\t\tisPuck: false,\r\n\t\t\thasOutline: true,\r\n\t\t\tvelocityCoefficient: 0.1,\r\n\t\t\trotationCoefficient: 0.015,\r\n\t\t\tsphere: {\r\n\t\t\t\tradius: 18,\r\n\t\t\t\twidthSegments: 16,\r\n\t\t\t\theightSegments: 12\r\n\t\t\t},\r\n\t\t\tpuck: {\r\n\t\t\t\tradius: 18,\r\n\t\t\t\textrude: {\r\n\t\t\t\t\tamount: 10,\r\n\t\t\t\t\tbevelEnabled: true,\r\n\t\t\t\t\tbevelSegments: 2,\r\n\t\t\t\t\tbevelSize: 6,\r\n\t\t\t\t\tbevelThickness: 10,\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\toutline: {\r\n\t\t\t\tradius: 19\r\n\t\t\t},\r\n\t\t},\r\n\t\tbutton: {\r\n\t\t\twidth: 16,\r\n\t\t\theight: 10,\r\n\t\t\tsegments: 20\r\n\t\t},\r\n\t\tflag: {\r\n\t\t\tanimate: false,\r\n\t\t\twidth: 40,\r\n\t\t\theight: 20,\r\n\t\t\twaveDepth: 2,\r\n\t\t\twidthSegments: 10,\r\n\t\t\theightSegments: 5,\r\n\t\t\trestDistance: 4\r\n\t\t},\r\n\t\tgate: {\r\n\t\t\twidth: TILE_SIZE,\r\n\t\t\textrude: {\r\n\t\t\t\tamount: TILE_SIZE,\r\n\t\t\t\tbevelEnabled: true,\r\n\t\t\t\tbevelSegments: 1,\r\n\t\t\t\tbevelSize: 6,\r\n\t\t\t\tbevelThickness: 10,\r\n\t\t\t}\r\n\t\t},\r\n\t\tspike: {\r\n\t\t\twidth: 32,\r\n\t\t\tsegments: 6,\r\n\t\t},\r\n\t\twall: {\r\n\t\t\textrude: {\r\n\t\t\t\tamount: TILE_SIZE * 1.5,\r\n\t\t\t\tsteps: 1,\r\n\t\t\t\tbevelEnabled: true,\r\n\t\t\t\tbevelSegments: 1,\r\n\t\t\t\tbevelSize: 6,\r\n\t\t\t\tbevelThickness: 10,\r\n\t\t\t}\r\n\t\t},\r\n\t},\r\n};","/**\r\n * @author alteredq / http://alteredqualia.com/\r\n * @author mr.doob / http://mrdoob.com/\r\n */\r\n\r\nconst Detector = {\r\n\tcanvas: !! window.CanvasRenderingContext2D,\r\n\twebgl: (function () {\r\n\t\ttry {\r\n\t\t\tvar canvas = document.createElement('canvas');\r\n\t\t\treturn !!(window.WebGLRenderingContext && (canvas.getContext('webgl') || canvas.getContext('experimental-webgl')));\r\n\t\t} catch(e) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t})(),\r\n\tworkers: !!window.Worker,\r\n\tfileapi: window.File && window.FileReader && window.FileList && window.Blob,\r\n\r\n\tgetWebGLErrorMessage: function () {\r\n\t\tvar element = document.createElement('div');\r\n\t\telement.id = 'webgl-error-message';\r\n\t\telement.style.fontFamily = 'monospace';\r\n\t\telement.style.fontSize = '13px';\r\n\t\telement.style.fontWeight = 'normal';\r\n\t\telement.style.textAlign = 'center';\r\n\t\telement.style.background = '#fff';\r\n\t\telement.style.color = '#000';\r\n\t\telement.style.padding = '1.5em';\r\n\t\telement.style.width = '400px';\r\n\t\telement.style.margin = '5em auto 0';\r\n\r\n\t\tif (!this.webgl) {\r\n\t\t\telement.innerHTML = window.WebGLRenderingContext ? [\r\n\t\t\t\t'Your graphics card does not seem to support <a href=\"http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation\" style=\"color:#000\">WebGL</a>.<br />',\r\n\t\t\t\t'Find out how to get it <a href=\"http://get.webgl.org/\" style=\"color:#000\">here</a>.'\r\n\t\t\t].join('\\n') : [\r\n\t\t\t\t'Your browser does not seem to support <a href=\"http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation\" style=\"color:#000\">WebGL</a>.<br/>',\r\n\t\t\t\t'Find out how to get it <a href=\"http://get.webgl.org/\" style=\"color:#000\">here</a>.'\r\n\t\t\t].join('\\n');\r\n\t\t}\r\n\r\n\t\treturn element;\r\n\t},\r\n\r\n\taddGetWebGLMessage: function(parameters) {\r\n\t\tvar parent, id, element;\r\n\r\n\t\tparameters = parameters || {};\r\n\r\n\t\tparent = parameters.parent !== undefined ? parameters.parent : document.body;\r\n\t\tid = parameters.id !== undefined ? parameters.id : 'oldie';\r\n\r\n\t\telement = Detector.getWebGLErrorMessage();\r\n\t\telement.id = id;\r\n\r\n\t\tparent.appendChild(element);\r\n\t}\r\n};\r\n\r\nexport default Detector;","import {\r\n\tClipper,\r\n\tJS as ClipperUtils,\r\n\tClipperOffset,\r\n\tPolyTree,\r\n\tPolyFillType,\r\n\tJoinType,\r\n\tEndType\r\n} from 'clipper';\r\n\r\nimport * as THREE from 'three';\r\n\r\nexport const simplify = Clipper.SimplifyPolygons;\r\nexport const lighten = ClipperUtils.Lighten;\r\n\r\nconst BL = 1.1; // ◣ bottom left\r\nconst TL = 1.2; // ◤ top left\r\nconst TR = 1.3; // ◥ top right\r\nconst BR = 1.4; // ◢ bottom right\r\n\r\nexport function createShapesFromTilemap({\r\n\tdata,\r\n\ttileSize = 40,\r\n\tlightenTolerance = tileSize / 4,\r\n\tmiterLimit = tileSize / 2,\r\n\tarcTolerance = 0.25,\r\n\tdiluteDelta = 0\r\n}) {\r\n\tvar paths = createClipperPaths(data, tileSize);\r\n\r\n\tvar simple = simplify(paths, PolyFillType.pftNonZero);\r\n\tvar light = lighten(simple, lightenTolerance);\r\n\r\n\tvar co = new ClipperOffset(miterLimit, arcTolerance);\r\n\tco.AddPaths(light, JoinType.jtMiter, EndType.etClosedPolygon);\r\n\r\n\tvar diluted = new PolyTree();\r\n\tco.Execute(diluted, diluteDelta);\r\n\r\n\tvar polygons = ClipperUtils.PolyTreeToExPolygons(diluted);\r\n\r\n\tvar shapes = createThreeShapesFromExPolygons(polygons);\r\n\r\n\treturn shapes;\r\n}\r\n\r\nexport function createThreeShapesFromExPolygons(polygons) {\r\n\treturn polygons.map(({ outer, holes }) => {\r\n\t\tvar shape = new THREE.Shape();\r\n\r\n\t\touter.forEach(({ X: x, Y: y }) => shape.moveTo(x, y));\r\n\r\n\t\tshape.holes = holes.map(hole => {\r\n\t\t\tvar holeShape = new THREE.Shape();\r\n\t\t\thole.forEach(({ X: x, Y: y }) => holeShape.moveTo(x, y));\r\n\r\n\t\t\treturn holeShape;\r\n\t\t});\r\n\r\n\t\treturn shape;\r\n\t});\r\n}\r\n\r\nexport function createClipperPaths(data, tileSize) {\r\n\tvar height = data.length;\r\n\tvar width = data[0].length;\r\n\r\n\treturn data.reduce((mem, columns, x) => {\r\n\t\tvar left = x * tileSize;\r\n\t\tcolumns.forEach((tile, y) => {\r\n\t\t\tvar top = y * tileSize;\r\n\t\t\tif (tile === 1) {\r\n\t\t\t\tmem.push([\r\n\t\t\t\t\t{ X: left, Y: top },\r\n\t\t\t\t\t{ X: left + tileSize, Y: top },\r\n\t\t\t\t\t{ X: left + tileSize, Y: top + tileSize },\r\n\t\t\t\t\t{ X: left, Y: top + tileSize },\r\n\t\t\t\t]);\r\n\t\t\t}\r\n\t\t\telse if (tile === BL) {\r\n\t\t\t\tmem.push([\r\n\t\t\t\t\t{ X: left, Y: top },\r\n\t\t\t\t\t{ X: left + tileSize, Y: top + tileSize },\r\n\t\t\t\t\t{ X: left, Y: top + tileSize },\r\n\t\t\t\t]);\r\n\t\t\t}\r\n\t\t\telse if (tile === TL) {\r\n\t\t\t\tmem.push([\r\n\t\t\t\t\t{ X: left, Y: top },\r\n\t\t\t\t\t{ X: left + tileSize, Y: top },\r\n\t\t\t\t\t{ X: left, Y: top + tileSize },\r\n\t\t\t\t]);\r\n\t\t\t}\r\n\t\t\telse if (tile === TR) {\r\n\t\t\t\tmem.push([\r\n\t\t\t\t\t{ X: left, Y: top },\r\n\t\t\t\t\t{ X: left + tileSize, Y: top },\r\n\t\t\t\t\t{ X: left + tileSize, Y: top + tileSize },\r\n\t\t\t\t]);\r\n\t\t\t}\r\n\t\t\telse if (tile === BR) {\r\n\t\t\t\tmem.push([\r\n\t\t\t\t\t{ X: left, Y: top + tileSize },\r\n\t\t\t\t\t{ X: left + tileSize, Y: top },\r\n\t\t\t\t\t{ X: left + tileSize, Y: top + tileSize },\r\n\t\t\t\t]);\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn mem;\r\n\t}, []);\r\n}\r\n","/**\n * Appends the elements of `values` to `array`.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to append.\n * @returns {Array} Returns `array`.\n */\nfunction arrayPush(array, values) {\n  var index = -1,\n      length = values.length,\n      offset = array.length;\n\n  while (++index < length) {\n    array[offset + index] = values[index];\n  }\n  return array;\n}\n\nexport default arrayPush;\n","/**\n * The base implementation of `_.property` without support for deep paths.\n *\n * @private\n * @param {string} key The key of the property to get.\n * @returns {Function} Returns the new function.\n */\nfunction baseProperty(key) {\n  return function(object) {\n    return object == null ? undefined : object[key];\n  };\n}\n\nexport default baseProperty;\n","import baseProperty from './_baseProperty';\n\n/**\n * Gets the \"length\" property value of `object`.\n *\n * **Note:** This function is used to avoid a [JIT bug](https://bugs.webkit.org/show_bug.cgi?id=142792)\n * that affects Safari on at least iOS 8.1-8.3 ARM64.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {*} Returns the \"length\" value.\n */\nvar getLength = baseProperty('length');\n\nexport default getLength;\n","/**\n * Checks if `value` is the [language type](https://es5.github.io/#x8) of `Object`.\n * (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\nexport default isObject;\n","import isObject from './isObject';\n\n/** `Object#toString` result references. */\nvar funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the [`toStringTag`](http://ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 8 which returns 'object' for typed array constructors, and\n  // PhantomJS 1.9 which returns 'function' for `NodeList` instances.\n  var tag = isObject(value) ? objectToString.call(value) : '';\n  return tag == funcTag || tag == genTag;\n}\n\nexport default isFunction;\n","/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This function is loosely based on [`ToLength`](http://ecma-international.org/ecma-262/6.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\nexport default isLength;\n","import getLength from './_getLength';\nimport isFunction from './isFunction';\nimport isLength from './isLength';\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null &&\n    !(typeof value == 'function' && isFunction(value)) && isLength(getLength(value));\n}\n\nexport default isArrayLike;\n","/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\nexport default isObjectLike;\n","import isArrayLike from './isArrayLike';\nimport isObjectLike from './isObjectLike';\n\n/**\n * This method is like `_.isArrayLike` except that it also checks if `value`\n * is an object.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array-like object, else `false`.\n * @example\n *\n * _.isArrayLikeObject([1, 2, 3]);\n * // => true\n *\n * _.isArrayLikeObject(document.body.children);\n * // => true\n *\n * _.isArrayLikeObject('abc');\n * // => false\n *\n * _.isArrayLikeObject(_.noop);\n * // => false\n */\nfunction isArrayLikeObject(value) {\n  return isObjectLike(value) && isArrayLike(value);\n}\n\nexport default isArrayLikeObject;\n","import isArrayLikeObject from './isArrayLikeObject';\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the [`toStringTag`](http://ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nfunction isArguments(value) {\n  // Safari 8.1 incorrectly makes `arguments.callee` enumerable in strict mode.\n  return isArrayLikeObject(value) && hasOwnProperty.call(value, 'callee') &&\n    (!propertyIsEnumerable.call(value, 'callee') || objectToString.call(value) == argsTag);\n}\n\nexport default isArguments;\n","/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @type {Function}\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\nexport default isArray;\n","import arrayPush from './_arrayPush';\nimport isArguments from './isArguments';\nimport isArray from './isArray';\nimport isArrayLikeObject from './isArrayLikeObject';\n\n/**\n * The base implementation of `_.flatten` with support for restricting flattening.\n *\n * @private\n * @param {Array} array The array to flatten.\n * @param {number} depth The maximum recursion depth.\n * @param {boolean} [isStrict] Restrict flattening to arrays-like objects.\n * @param {Array} [result=[]] The initial result value.\n * @returns {Array} Returns the new flattened array.\n */\nfunction baseFlatten(array, depth, isStrict, result) {\n  result || (result = []);\n\n  var index = -1,\n      length = array.length;\n\n  while (++index < length) {\n    var value = array[index];\n    if (depth > 0 && isArrayLikeObject(value) &&\n        (isStrict || isArray(value) || isArguments(value))) {\n      if (depth > 1) {\n        // Recursively flatten arrays (susceptible to call stack limits).\n        baseFlatten(value, depth - 1, isStrict, result);\n      } else {\n        arrayPush(result, value);\n      }\n    } else if (!isStrict) {\n      result[result.length] = value;\n    }\n  }\n  return result;\n}\n\nexport default baseFlatten;\n","/**\n * A specialized version of `_.reduce` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {*} [accumulator] The initial value.\n * @param {boolean} [initAccum] Specify using the first element of `array` as the initial value.\n * @returns {*} Returns the accumulated value.\n */\nfunction arrayReduce(array, iteratee, accumulator, initAccum) {\n  var index = -1,\n      length = array.length;\n\n  if (initAccum && length) {\n    accumulator = array[++index];\n  }\n  while (++index < length) {\n    accumulator = iteratee(accumulator, array[index], index, array);\n  }\n  return accumulator;\n}\n\nexport default arrayReduce;\n","import arrayReduce from './_arrayReduce';\n\n/**\n * The base implementation of `_.pick` without support for individual\n * property names.\n *\n * @private\n * @param {Object} object The source object.\n * @param {string[]} props The property names to pick.\n * @returns {Object} Returns the new object.\n */\nfunction basePick(object, props) {\n  object = Object(object);\n  return arrayReduce(props, function(result, key) {\n    if (key in object) {\n      result[key] = object[key];\n    }\n    return result;\n  }, {});\n}\n\nexport default basePick;\n","/**\n * A faster alternative to `Function#apply`, this function invokes `func`\n * with the `this` binding of `thisArg` and the arguments of `args`.\n *\n * @private\n * @param {Function} func The function to invoke.\n * @param {*} thisArg The `this` binding of `func`.\n * @param {...*} args The arguments to invoke `func` with.\n * @returns {*} Returns the result of `func`.\n */\nfunction apply(func, thisArg, args) {\n  var length = args.length;\n  switch (length) {\n    case 0: return func.call(thisArg);\n    case 1: return func.call(thisArg, args[0]);\n    case 2: return func.call(thisArg, args[0], args[1]);\n    case 3: return func.call(thisArg, args[0], args[1], args[2]);\n  }\n  return func.apply(thisArg, args);\n}\n\nexport default apply;\n","import isFunction from './isFunction';\nimport isObject from './isObject';\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** Used to match leading and trailing whitespace. */\nvar reTrim = /^\\s+|\\s+$/g;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3);\n * // => 3\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3');\n * // => 3\n */\nfunction toNumber(value) {\n  if (isObject(value)) {\n    var other = isFunction(value.valueOf) ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = value.replace(reTrim, '');\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nexport default toNumber;\n","import toNumber from './toNumber';\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0,\n    MAX_INTEGER = 1.7976931348623157e+308;\n\n/**\n * Converts `value` to an integer.\n *\n * **Note:** This function is loosely based on [`ToInteger`](http://www.ecma-international.org/ecma-262/6.0/#sec-tointeger).\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {number} Returns the converted integer.\n * @example\n *\n * _.toInteger(3);\n * // => 3\n *\n * _.toInteger(Number.MIN_VALUE);\n * // => 0\n *\n * _.toInteger(Infinity);\n * // => 1.7976931348623157e+308\n *\n * _.toInteger('3');\n * // => 3\n */\nfunction toInteger(value) {\n  if (!value) {\n    return value === 0 ? value : 0;\n  }\n  value = toNumber(value);\n  if (value === INFINITY || value === -INFINITY) {\n    var sign = (value < 0 ? -1 : 1);\n    return sign * MAX_INTEGER;\n  }\n  var remainder = value % 1;\n  return value === value ? (remainder ? value - remainder : value) : 0;\n}\n\nexport default toInteger;\n","import apply from './_apply';\nimport toInteger from './toInteger';\n\n/** Used as the `TypeError` message for \"Functions\" methods. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max;\n\n/**\n * Creates a function that invokes `func` with the `this` binding of the\n * created function and arguments from `start` and beyond provided as an array.\n *\n * **Note:** This method is based on the [rest parameter](https://mdn.io/rest_parameters).\n *\n * @static\n * @memberOf _\n * @category Function\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @returns {Function} Returns the new function.\n * @example\n *\n * var say = _.rest(function(what, names) {\n *   return what + ' ' + _.initial(names).join(', ') +\n *     (_.size(names) > 1 ? ', & ' : '') + _.last(names);\n * });\n *\n * say('hello', 'fred', 'barney', 'pebbles');\n * // => 'hello fred, barney, & pebbles'\n */\nfunction rest(func, start) {\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  start = nativeMax(start === undefined ? (func.length - 1) : toInteger(start), 0);\n  return function() {\n    var args = arguments,\n        index = -1,\n        length = nativeMax(args.length - start, 0),\n        array = Array(length);\n\n    while (++index < length) {\n      array[index] = args[start + index];\n    }\n    switch (start) {\n      case 0: return func.call(this, array);\n      case 1: return func.call(this, args[0], array);\n      case 2: return func.call(this, args[0], args[1], array);\n    }\n    var otherArgs = Array(start + 1);\n    index = -1;\n    while (++index < start) {\n      otherArgs[index] = args[index];\n    }\n    otherArgs[start] = array;\n    return apply(func, this, otherArgs);\n  };\n}\n\nexport default rest;\n","import baseFlatten from './_baseFlatten';\nimport basePick from './_basePick';\nimport rest from './rest';\n\n/**\n * Creates an object composed of the picked `object` properties.\n *\n * @static\n * @memberOf _\n * @category Object\n * @param {Object} object The source object.\n * @param {...(string|string[])} [props] The property names to pick, specified\n *  individually or in arrays.\n * @returns {Object} Returns the new object.\n * @example\n *\n * var object = { 'a': 1, 'b': '2', 'c': 3 };\n *\n * _.pick(object, ['a', 'c']);\n * // => { 'a': 1, 'c': 3 }\n */\nvar pick = rest(function(object, props) {\n  return object == null ? {} : basePick(object, baseFlatten(props, 1));\n});\n\nexport default pick;\n","import pick from 'lodash-es/pick';\r\nimport * as THREE from 'three';\r\n\r\nimport defaults from '../config/defaults';\r\n\r\nconst GAME_WIDTH = 1280;\r\nconst GAME_HEIGHT = 800;\r\nconst ASPECT_RATIO = GAME_WIDTH / GAME_HEIGHT;\r\nconst RAD = 180 / Math.PI;\r\nconst materialProperties = ['color', 'specular', 'shininess', 'opacity', 'map', 'shading', 'blending', 'wireframe', 'depthTest', 'depthWrite', 'side', 'transparent'];\r\n\r\nconst loader = new THREE.ObjectLoader();\r\n\r\nexport function loadObjectFromJson(json) {\r\n\tvar mesh = loader.parse(json);\r\n\tmesh.rotateX(-Math.PI / 2);\r\n\treturn mesh;\r\n}\r\n\r\nexport function createMaterial(params) {\r\n\tvar Material = params.shiny ? THREE.MeshPhongMaterial : THREE.MeshLambertMaterial;\r\n\treturn new Material(pick(params, materialProperties));\r\n}\r\n\r\nexport function createRenderer({\r\n\talpha = true,\r\n\tantialias = true\r\n} = {}) {\r\n\tvar renderer = new THREE.WebGLRenderer({\r\n\t\talpha,\r\n\t\tantialias\r\n\t});\r\n\r\n\tdocument.body.appendChild(renderer.domElement);\r\n\trenderer.domElement.id = 'walls3d';\r\n\r\n\treturn renderer;\r\n}\r\n\r\nexport function createScene() {\r\n\tvar scene = new THREE.Scene();\r\n\treturn scene;\r\n}\r\n\r\nexport function createCamera({\r\n\taspect = 1280 / 800,\r\n\tfov = 75,\r\n\tnear = 10,\r\n\tfar = 10000,\r\n\tdistance = 1000\r\n} = {}) {\r\n\tvar camera = new THREE.PerspectiveCamera(fov, ASPECT_RATIO, near, far);\r\n\r\n\t// to make 0,0 be top left\r\n\tcamera.up = new THREE.Vector3(0, -1, 0);\r\n\r\n\tcamera.position.z = -distance;\r\n\tcamera.lookAt(new THREE.Vector3(0, 0, 0));\r\n\r\n\treturn camera;\r\n}\r\n\r\nexport function updateCameraFOV(camera, canvasHeight) {\r\n\tcamera.fov = 2 * Math.atan(canvasHeight / (-camera.position.z * 2)) * RAD;\r\n\tcamera.updateProjectionMatrix();\r\n}\r\n\r\nexport function createRectangle(width = defaults.tileSize) {\r\n\tvar half = width / 2;\r\n\r\n\tvar shape = new THREE.Shape();\r\n\tshape.moveTo(-half, -half);\r\n\tshape.lineTo(half, -half);\r\n\tshape.lineTo(half, half);\r\n\tshape.lineTo(-half, half);\r\n\r\n\treturn shape;\r\n}\r\n\r\nexport function createCircle(radius = defaults.tileSize / 2) {\r\n\tvar shape = new THREE.Shape();\r\n\r\n\tshape.moveTo(radius, 0);\r\n\tshape.absarc(0, 0, radius, 0, 2 * Math.PI, false);\r\n\r\n\treturn shape;\r\n}\r\n\r\nexport function createRectangleGeometry(width = defaults.tileSize, extrude = {}) {\r\n\tvar shape = createRectangle(width);\r\n\r\n\tvar geometry = shape.extrude(extrude);\r\n\tgeometry.translate(0, 0, -extrude.amount);\r\n\r\n\tif (extrude.bevelEnabled) {\r\n\t\tvar xy = 1 / ((width + extrude.bevelSize * 2) / width);\r\n\t\tgeometry.scale(xy, xy, 1);\r\n\t}\r\n\r\n\treturn geometry;\r\n}\r\n\r\nexport function createPuckGeometry({\r\n\tradius = defaults.tileSize,\r\n\textrude = {}\r\n} = {}) {\r\n\tvar shape = createCircle(radius);\r\n\r\n\tvar geometry = shape.extrude(extrude);\r\n\tgeometry.translate(0, 0, -extrude.amount);\r\n\r\n\tif (extrude.bevelEnabled) {\r\n\t\tvar width = radius * 2;\r\n\t\tvar xy = 1 / ((width + extrude.bevelSize * 2) / width);\r\n\t\tgeometry.scale(xy, xy, 1);\r\n\t}\r\n\r\n\treturn geometry;\r\n}\r\n\r\nexport function createSphereGeometry({\r\n\tradius = defaults.tileSize,\r\n\twidthSegments = 16,\r\n\theightSegments = 12\r\n} = {}) {\r\n\tvar geometry = new THREE.SphereGeometry(radius, widthSegments, heightSegments);\r\n\r\n\treturn geometry;\r\n}\r\n\r\nexport function createCylinderGeometry({\r\n\tradiusTop = 10,\r\n\tradiusBottom = 10,\r\n\theight = defaults.tileSize,\r\n\tsegments = 16\r\n} = {}) {\r\n\tvar geometry = new THREE.CylinderGeometry(radiusTop, radiusBottom, height, segments);\r\n\r\n\tgeometry.rotateX(-Math.PI / 2);\r\n\tgeometry.translate(0, 0, -height / 2);\r\n\r\n\treturn geometry;\r\n}\r\n\r\nexport function createClothGeometry({\r\n\twidth = defaults.tileSize,\r\n\theight = defaults.tileSize / 2,\r\n\twidthSegments = defaults.tileSize / 4,\r\n\theightSegments = defaults.tileSize / 8,\r\n\tdepth = defaults.tileSize / 4\r\n}) {\r\n\tvar geometry = new THREE.PlaneGeometry(width, height, widthSegments, heightSegments);\r\n\tgeometry.translate(width / 2, height / 2, 0);\r\n\r\n\tfor (var col = 0; col <= widthSegments; col++) {\r\n\t\tlet z = Math.sin((col / widthSegments) * Math.PI * 2) * depth;\r\n\t\tfor (var row = 0; row <= heightSegments; row++) {\r\n\t\t\tgeometry.vertices[row * (widthSegments + 1) + col].z = z;\r\n\t\t}\r\n\t}\r\n\r\n\tgeometry.rotateX(Math.PI / 2);\r\n\r\n\treturn geometry;\r\n}\r\n","import * as THREE from 'three';\r\n\r\nexport function addAmbientLight(scene, {\r\n\tcolor = 0xffffff\r\n} = {}) {\r\n\tvar light = new THREE.AmbientLight(color);\r\n\tscene.add(light);\r\n\treturn light;\r\n}\r\n\r\nexport function addCameraLight(camera, {\r\n\tcolor = 0xffffff,\r\n\tintensity = 1,\r\n\tdistance = 0,\r\n\tdecay = 0\r\n} = {}) {\r\n\tvar light = new THREE.PointLight(color, intensity, distance, decay);\r\n\tcamera.add(light);\r\n\treturn light;\r\n}\r\n\r\nexport function addDirectionalLight(scene, {\r\n\tcolor = 0xffffff,\r\n\tintensity = 1.0,\r\n\tposition = [500, -500, 400]\r\n} = {}) {\r\n\tvar light = new THREE.DirectionalLight(color, intensity);\r\n\tlight.position.set.apply(light.position, position);\r\n\tscene.add(light);\r\n\treturn light;\r\n}\r\n\r\nexport function addLights(lights, scene, camera) {\r\n\tlights.forEach(light => {\r\n\t\tif (!light.enabled) return;\r\n\r\n\t\tif (light.type === 'camera') {\r\n\t\t\taddCameraLight(camera, light);\r\n\t\t}\r\n\t\telse if (light.type === 'ambient') {\r\n\t\t\taddAmbientLight(scene, light);\r\n\t\t}\r\n\t\telse if (light.type === 'directional') {\r\n\t\t\taddDirectionalLight(scene, light);\r\n\t\t}\r\n\t});\r\n}","{\n\t\"metadata\": {\n\t\t\"version\": 4.4,\n\t\t\"type\": \"Object\",\n\t\t\"generator\": \"Object3D.toJSON\"\n\t},\n\t\"geometries\": [\n\t\t{\n\t\t\t\"uuid\": \"533B036E-7BD8-412A-9826-C270344C731B\",\n\t\t\t\"type\": \"SphereGeometry\",\n\t\t\t\"radius\": 16,\n\t\t\t\"widthSegments\": 16,\n\t\t\t\"heightSegments\": 16,\n\t\t\t\"phiStart\": 0,\n\t\t\t\"phiLength\": 6.283185307179586,\n\t\t\t\"thetaStart\": 0,\n\t\t\t\"thetaLength\": 3.141592653589793\n\t\t},\n\t\t{\n\t\t\t\"uuid\": \"EDC5A60E-30F9-46AD-8F00-57694EA6046F\",\n\t\t\t\"type\": \"CylinderGeometry\",\n\t\t\t\"radiusTop\": 2,\n\t\t\t\"radiusBottom\": 3,\n\t\t\t\"height\": 3,\n\t\t\t\"radialSegments\": 32,\n\t\t\t\"heightSegments\": 1,\n\t\t\t\"openEnded\": false\n\t\t},\n\t\t{\n\t\t\t\"uuid\": \"D0B38B94-F57F-43DA-B2D5-EE90F990436E\",\n\t\t\t\"type\": \"TorusGeometry\",\n\t\t\t\"radius\": 4.38,\n\t\t\t\"tube\": 0.76,\n\t\t\t\"radialSegments\": 8,\n\t\t\t\"tubularSegments\": 4,\n\t\t\t\"arc\": 1.5\n\t\t}],\n\t\"materials\": [\n\t\t{\n\t\t\t\"uuid\": \"1F3DD044-3AE4-4584-86A8-C8456E25A261\",\n\t\t\t\"type\": \"MeshPhongMaterial\",\n\t\t\t\"color\": 0,\n\t\t\t\"emissive\": 0,\n\t\t\t\"specular\": 1118481,\n\t\t\t\"shininess\": 30\n\t\t},\n\t\t{\n\t\t\t\"uuid\": \"5EA66438-C4FF-47F2-AF74-98D9402BB676\",\n\t\t\t\"type\": \"MeshStandardMaterial\",\n\t\t\t\"color\": 16777215,\n\t\t\t\"emissive\": 0\n\t\t},\n\t\t{\n\t\t\t\"uuid\": \"F329FA2E-2C71-4D28-A17F-11DC28B61168\",\n\t\t\t\"type\": \"MeshLambertMaterial\",\n\t\t\t\"color\": 16777215,\n\t\t\t\"emissive\": 0\n\t\t}],\n\t\"object\": {\n\t\t\"uuid\": \"DA35D27C-42A2-431C-88DE-E56516B50BBC\",\n\t\t\"type\": \"Mesh\",\n\t\t\"name\": \"bomb\",\n\t\t\"matrix\": [0.7899922132492065,-0.5194664001464844,0.325679212808609,0,0.6131168603897095,0.6693249344825745,-0.4196329712867737,0,1.5541177234013048e-8,0.5311862230300903,0.8472551107406616,0,0,0,0,1],\n\t\t\"geometry\": \"533B036E-7BD8-412A-9826-C270344C731B\",\n\t\t\"material\": \"1F3DD044-3AE4-4584-86A8-C8456E25A261\",\n\t\t\"children\": [\n\t\t\t{\n\t\t\t\t\"uuid\": \"3DD112B4-0A42-4E6A-A96D-5BF76D3D877D\",\n\t\t\t\t\"type\": \"Mesh\",\n\t\t\t\t\"name\": \"head\",\n\t\t\t\t\"matrix\": [1,0,0,0,0,1,0,0,0,0,1,0,0.36041587591171265,16.43364143371582,2.5216023921966553,1],\n\t\t\t\t\"geometry\": \"EDC5A60E-30F9-46AD-8F00-57694EA6046F\",\n\t\t\t\t\"material\": \"5EA66438-C4FF-47F2-AF74-98D9402BB676\",\n\t\t\t\t\"children\": [\n\t\t\t\t\t{\n\t\t\t\t\t\t\"uuid\": \"36583292-82F4-43A0-A341-165C18F8536A\",\n\t\t\t\t\t\t\"type\": \"Mesh\",\n\t\t\t\t\t\t\"name\": \"fuse\",\n\t\t\t\t\t\t\"matrix\": [0.9713379740715027,-0.2377026230096817,0,0,0.2377026230096817,0.9713379740715027,0,0,0,0,1,0,-4.180724620819092,2.1819465160369873,0.011280663311481476,1],\n\t\t\t\t\t\t\"geometry\": \"D0B38B94-F57F-43DA-B2D5-EE90F990436E\",\n\t\t\t\t\t\t\"material\": \"F329FA2E-2C71-4D28-A17F-11DC28B61168\"\n\t\t\t\t\t}]\n\t\t\t}]\n\t}\n}","import * as THREE from 'three';\r\n\r\nimport bombModel from '../models/bomb.json';\r\nimport { loadObjectFromJson } from '../utils';\r\n\r\nexport default class Bomb extends THREE.Object3D {\r\n\tconstructor(materials = {}, options = {}) {\r\n\t\tsuper();\r\n\r\n\t\tthis.materials = materials;\r\n\r\n\t\tvar mesh = loadObjectFromJson(bombModel);\r\n\r\n\t\tthis.add(mesh);\r\n\r\n\t\tthis.getObjectByName('bomb').material.setValues(materials.default);\r\n\t}\r\n\r\n\tshow() {\r\n\t\tthis.traverse(o => o.material && o.material.setValues(this.materials.visible));\r\n\t\treturn this;\r\n\t}\r\n\r\n\thide() {\r\n\t\tthis.traverse(o => o.material && o.material.setValues(this.materials.hidden));\r\n\t\treturn this;\r\n\t}\r\n}\r\n","{\n\t\"metadata\": {\n\t\t\"version\": 4.4,\n\t\t\"type\": \"Object\",\n\t\t\"generator\": \"Object3D.toJSON\"\n\t},\n\t\"geometries\": [\n\t\t{\n\t\t\t\"uuid\": \"54670159-6998-4362-BA46-888A21257CD5\",\n\t\t\t\"type\": \"CylinderGeometry\",\n\t\t\t\"radiusTop\": 14,\n\t\t\t\"radiusBottom\": 16,\n\t\t\t\"height\": 6,\n\t\t\t\"radialSegments\": 16,\n\t\t\t\"heightSegments\": 1,\n\t\t\t\"openEnded\": false\n\t\t},\n\t\t{\n\t\t\t\"uuid\": \"AE5197D7-422A-4045-8124-3856FD770B02\",\n\t\t\t\"type\": \"CylinderGeometry\",\n\t\t\t\"radiusTop\": 2,\n\t\t\t\"radiusBottom\": 2,\n\t\t\t\"height\": 80,\n\t\t\t\"radialSegments\": 16,\n\t\t\t\"heightSegments\": 1,\n\t\t\t\"openEnded\": false\n\t\t}],\n\t\"materials\": [\n\t\t{\n\t\t\t\"uuid\": \"77B0FED5-70AE-4355-8AB2-880F5272D835\",\n\t\t\t\"type\": \"MeshStandardMaterial\",\n\t\t\t\"color\": 16777215,\n\t\t\t\"emissive\": 0\n\t\t},\n\t\t{\n\t\t\t\"uuid\": \"01C26A60-8C68-4AE5-8748-FBA22CC708C0\",\n\t\t\t\"type\": \"MeshStandardMaterial\",\n\t\t\t\"color\": 16777215,\n\t\t\t\"emissive\": 0\n\t\t}],\n\t\"object\": {\n\t\t\"uuid\": \"0160F14F-4FD1-4031-8DF0-997DE6CF2B01\",\n\t\t\"type\": \"Mesh\",\n\t\t\"name\": \"flagpole\",\n\t\t\"matrix\": [1,0,0,0,0,1,0,0,0,0,1,0,0,3,0,1],\n\t\t\"geometry\": \"54670159-6998-4362-BA46-888A21257CD5\",\n\t\t\"material\": \"77B0FED5-70AE-4355-8AB2-880F5272D835\",\n\t\t\"children\": [\n\t\t\t{\n\t\t\t\t\"uuid\": \"CD24A77F-955F-4EE5-8B5F-ED57DCF91B30\",\n\t\t\t\t\"type\": \"Mesh\",\n\t\t\t\t\"name\": \"pole\",\n\t\t\t\t\"matrix\": [1,0,0,0,0,1,0,0,0,0,1,0,0,40,0,1],\n\t\t\t\t\"geometry\": \"AE5197D7-422A-4045-8124-3856FD770B02\",\n\t\t\t\t\"material\": \"01C26A60-8C68-4AE5-8748-FBA22CC708C0\",\n\t\t\t\t\"children\": [\n\t\t\t\t\t{\n\t\t\t\t\t\t\"uuid\": \"10481D52-7276-49C2-89AE-363B68A34731\",\n\t\t\t\t\t\t\"type\": \"Group\",\n\t\t\t\t\t\t\"name\": \"anchor\",\n\t\t\t\t\t\t\"matrix\": [1,0,0,0,0,1,0,0,0,0,1,0,0,40,0,1]\n\t\t\t\t\t}]\n\t\t\t}]\n\t}\n}","import * as THREE from 'three';\n\nvar _tempVec3 = new THREE.Vector3();\n\nexport default class Cloth {\n\tconstructor({\n\t\twidthSegments = 10,\n\t\theightSegments = 6,\n\t\trestDistance = 4,\n\t\tuseWind = true,\n\t\tgravity = new THREE.Vector3(0, 0, 9.81),\n\t\tdrag = 0.97,\n\t\tmass = 0.1,\n\t\tspeed = 0.001\n\t} = {}) {\n\t\tconsole.log(arguments[0]);\n\t\tthis._widthSegments = widthSegments;\n\t\tthis._heightSegments = heightSegments;\n\t\tthis._windForce = new THREE.Vector3(0.1, 0.05, 0);\n\n\t\tthis.useWind = true;\n\t\tthis.gravity = gravity.multiplyScalar(mass);\n\t\tthis.speed = speed;\n\n\t\tvar clothFunction = createClothFunction(widthSegments * restDistance, heightSegments * restDistance);\n\n\t\tthis.particles = createParticles(widthSegments, heightSegments, clothFunction, mass, drag);\n\t\tthis.constraints = createConstraints(widthSegments, heightSegments, this.particles, restDistance);\n\n\t\tthis.geometry = new THREE.ParametricGeometry(clothFunction, widthSegments, heightSegments);\n\t\tthis.geometry.dynamic = true;\n\n\t\tconsole.table(this.geometry.vertices);\n\n\t\twindow.cloth = this;\n\n\t\tthis._initPins();\n\t\tthis.pinEdge();\n\t}\n\n\t_initPins() {\n\t\tvar left = [];\n\t\tfor (let i = 0; i <= this._heightSegments; i++) {\n\t\t\tleft.push(i * (this._widthSegments + 1));\n\t\t}\n\n\t\tthis._pinsEdge = left;\n\t\tthis._pinsCorner = [0, this._widthSegments + 1];\n\t}\n\n\tpinEdge() {\n\t\tthis.pins = this._pinsEdge;\n\t}\n\n\tpinCorner() {\n\t\tthis.pins = this._pinsCorner;\n\t}\n\n\tsetWind(x, y, z) {\n\t\tthis._windForce.set(x, y, z);\n\t}\n\n\tupdate(delta) {\n\t\tif (this.useWind) {\n\t\t\tapplyWind(this.geometry, this.particles, this._windForce);\n\t\t}\n\n\t\tapplyGravity(this.geometry, this.particles, this.gravity, delta * this.speed);\n\n\t\thandleConstraints(this.constraints);\n\n\t\thandlePins(this.particles, this.pins);\n\t}\n\n\tupdateGeometry() {\n\t\tvar len = this.particles.length;\n\n\t\tfor (var i = 0; i < len; i++) {\n\t\t\tthis.geometry.vertices[i].copy(this.particles[i].position);\n\t\t}\n\n\t\tthis.geometry.computeFaceNormals();\n\t\tthis.geometry.computeVertexNormals();\n\n\t\tthis.geometry.normalsNeedUpdate = true;\n\t\tthis.geometry.verticesNeedUpdate = true;\n\t}\n}\n\nclass Particle {\n\tconstructor(func, x, y, z, mass, drag) {\n\t\tthis.position = func(x, y);\n\t\tthis.previous = func(x, y);\n\t\tthis.original = func(x, y);\n\n\t\tthis.accel = new THREE.Vector3(0, 0, 0);\n\t\tthis.mass = mass;\n\t\tthis.massInv = 1 / mass;\n\t\tthis.drag = drag;\n\t}\n\n\t// Force -> Acceleration\n\taddForce(force) {\n\t\tthis.accel.add(_tempVec3.copy(force).multiplyScalar(this.massInv));\n\t}\n\n\t// Performs verlet integration\n\tintegrate(timesq) {\n\t\tvar pos = _tempVec3.subVectors(this.position, this.previous);\n\t\tpos.multiplyScalar(this.drag).add(this.position);\n\t\tpos.add(this.accel.multiplyScalar(timesq));\n\n\t\t_tempVec3 = this.previous;\n\t\tthis.previous = this.position;\n\t\tthis.position = pos;\n\n\t\tthis.accel.set(0, 0, 0);\n\t}\n}\n\nfunction createClothFunction(width, height) {\n\treturn function(u, v) {\n\t\tvar x = u * width;\n\t\tvar y = 0;\n\t\tvar z = v * height;\n\t\treturn new THREE.Vector3(x, y, z);\n\t};\n}\n\nfunction createParticles(width, height, func, mass, drag) {\n\tvar particles = [];\n\tvar u, v;\n\n\t// Create particles\n\tfor (v = 0; v <= height; v++) {\n\t\tfor (u = 0; u <= width; u++) {\n\t\t\tparticles.push(new Particle(func, u / width, v / height, 0, mass, drag));\n\t\t}\n\t}\n\n\treturn particles;\n}\n\nfunction createConstraints(width, height, particles, restDistance) {\n\tvar index = (u, v) => u + v * (width + 1);\n\tvar constraints = [];\n\tvar u, v;\n\n\t// Structural\n\tfor (v = 0; v < height; v++) {\n\t\tfor (u = 0; u < width; u++) {\n\t\t\tconstraints.push([\n\t\t\t\tparticles[index(u, v)],\n\t\t\t\tparticles[index(u, v + 1)],\n\t\t\t\trestDistance\n\t\t\t]);\n\n\t\t\tconstraints.push([\n\t\t\t\tparticles[index(u, v)],\n\t\t\t\tparticles[index(u + 1, v)],\n\t\t\t\trestDistance\n\t\t\t]);\n\t\t}\n\t}\n\n\tfor (u = width, v = 0; v < height; v++) {\n\t\tconstraints.push([\n\t\t\tparticles[index(u, v)],\n\t\t\tparticles[index(u, v + 1)],\n\t\t\trestDistance\n\t\t]);\n\t}\n\n\tfor (v = height, u = 0; u < width; u++) {\n\t\tconstraints.push([\n\t\t\tparticles[index(u, v)],\n\t\t\tparticles[index(u + 1, v)],\n\t\t\trestDistance\n\t\t]);\n\t}\n\n\t// While many system uses shear and bend springs,\n\t// the relax constraints model seem to be just fine\n\t// using structural springs.\n\t// Shear\n\t// var diagonalDist = Math.sqrt(restDistance * restDistance * 2);\n\n\t// for (v=0;v<h;v++) {\n\t// \tfor (u=0;u<w;u++) {\n\t// \t\tconstraints.push([\n\t// \t\t\tparticles[index(u, v)],\n\t// \t\t\tparticles[index(u+1, v+1)],\n\t// \t\t\tdiagonalDist\n\t// \t\t]);\n\t//\n\t// \t\tconstraints.push([\n\t// \t\t\tparticles[index(u+1, v)],\n\t// \t\t\tparticles[index(u, v+1)],\n\t// \t\t\tdiagonalDist\n\t// \t\t]);\n\t// \t}\n\t// }\n\n\treturn constraints;\n}\n\n// Aerodynamics forces\nfunction applyWind(geometry, particles, force) {\n\tvar faces = geometry.faces;\n\tvar len = faces.length;\n\n\tfor (var i = 0; i < len; i++) {\n\t\tlet face = faces[i];\n\t\tlet normal = face.normal;\n\n\t\t_tempVec3.copy(normal).normalize().multiplyScalar(normal.dot(force));\n\t\tparticles[face.a].addForce(_tempVec3);\n\t\tparticles[face.b].addForce(_tempVec3);\n\t\tparticles[face.c].addForce(_tempVec3);\n\t}\n}\n\nfunction applyGravity(geometry, particles, gravity, timesq) {\n\tvar len = particles.length;\n\tfor (let i = 0; i < len; i++) {\n\t\tlet particle = particles[i];\n\t\tparticle.addForce(gravity);\n\t\tparticle.integrate(timesq);\n\t}\n}\n\nfunction satisfyConstraints(p1, p2, distance) {\n\t_tempVec3.subVectors(p2.position, p1.position);\n\tvar currentDist = _tempVec3.length();\n\tif (currentDist == 0) return; // prevents division by 0\n\tvar correction = _tempVec3.multiplyScalar(1 - distance / currentDist);\n\tvar correctionHalf = correction.multiplyScalar(0.5);\n\tp1.position.add(correctionHalf);\n\tp2.position.sub(correctionHalf);\n}\n\nfunction handleConstraints(constraints) {\n\tvar len = constraints.length;\n\n\t// Start Constraints\n\tfor (let i = 0; i < len; i++) {\n\t\tlet constraint = constraints[i];\n\t\tsatisfyConstraints(constraint[0], constraint[1], constraint[2]);\n\t}\n\n\t// Floor Constaints\n\t// particles = cloth.particles;\n\t// il = particles.length;\n\t// for (i = 0; i < il; i++) {\n\t// \tparticle = particles[i];\n\t// \tlet pos = particle.position;\n\t// \tif (pos.y < - 250) {\n\t// \t\tpos.y = - 250;\n\t// \t}\n\t// }\n}\n\nfunction handlePins(particles, pins) {\n\tvar len = pins.length;\n\n\t// Pin Constraints\n\tfor (let i = 0; i < len; i++) {\n\t\tlet xy = pins[i];\n\t\tlet p = particles[xy];\n\t\tp.position.copy(p.original);\n\t\tp.previous.copy(p.original);\n\t}\n}\n","import * as THREE from 'three';\r\n\r\nimport * as utils from '../utils';\r\nimport { loadObjectFromJson } from '../utils';\r\nimport flagpoleModel from '../models/flagpole.json';\r\nimport Cloth from '../cloth';\r\n\r\nexport default class Flag extends THREE.Object3D {\r\n\tconstructor(clothMaterial = {}, options = {}) {\r\n\t\tsuper();\r\n\r\n\t\tvar pole = loadObjectFromJson(flagpoleModel);\r\n\t\tthis.add(pole);\r\n\r\n\t\tthis.anchor.add(createCloth(clothMaterial, options));\r\n\t}\r\n\r\n\tget anchor() {\r\n\t\treturn this.getObjectByName('anchor');\r\n\t}\r\n\r\n\tshow() {\r\n\t\tthis.traverse(o => o.material && (o.material.opacity = 1.0));\r\n\t\tthis.anchor.visible = true;\r\n\t\treturn this;\r\n\t}\r\n\r\n\thide() {\r\n\t\tthis.traverse(o => o.material && (o.material.opacity = 0.2));\r\n\t\tthis.anchor.visible = false;\r\n\t\treturn this;\r\n\t}\r\n\r\n\tupdate(time, delta) {\r\n\t\tif (this.params.cloth.animate) {\r\n\t\t\tthis.cloth.update(delta);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction createCloth(material, params) {\r\n\tvar geometry;\r\n\tif (params.animate) {\r\n\t\tvar cloth = new Cloth(params);\r\n\t\tgeometry = cloth.geometry;\r\n\t}\r\n\telse {\r\n\t\tgeometry = utils.createClothGeometry(params);\r\n\t\t// geometry.rotateX(-0.1);\r\n\t}\r\n\r\n\tvar material1 = utils.createMaterial(material);\r\n\r\n\treturn new THREE.Mesh(geometry, material1);\r\n}","import * as THREE from 'three';\r\n\r\nimport * as utils from '../utils';\r\n\r\nvar geometry;\r\n\r\nexport default class Gate extends THREE.Mesh {\r\n\tconstructor(materials = {}, options = {}) {\r\n\r\n\t\tif (!geometry) geometry = utils.createRectangleGeometry(options.width, options.extrude);\r\n\t\tvar material = utils.createMaterial(materials.default);\r\n\r\n\t\tsuper(geometry, material);\r\n\r\n\t\tthis.name = 'gate';\r\n\r\n\t\tthis.options = options;\r\n\t\tthis.materials = materials;\r\n\t}\r\n\r\n\toff() {\r\n\t\tthis.material.setValues(this.materials.off);\r\n\t\treturn this;\r\n\t}\r\n\r\n\tred() {\r\n\t\tthis.material.setValues(this.materials.red);\r\n\t\treturn this;\r\n\t}\r\n\r\n\tgreen() {\r\n\t\tthis.material.setValues(this.materials.green);\r\n\t\treturn this;\r\n\t}\r\n\r\n\tblue() {\r\n\t\tthis.material.setValues(this.materials.blue);\r\n\t\treturn this;\r\n\t}\r\n}\r\n","import * as THREE from 'three';\r\n\r\nimport * as utils from '../utils';\r\nimport config from '../../config/defaults';\r\nconst spike = config.objects.spike;\r\n\r\nvar _material, _geometry;\r\n\r\nexport default class Spike extends THREE.Mesh {\r\n\tconstructor(material = {}, options = {}) {\r\n\t\tif (!_geometry) _geometry = createSpikeGeometry(options);\r\n\t\tif (!_material) _material = utils.createMaterial(material);\r\n\r\n\t\tsuper(_geometry, _material);\r\n\r\n\t\tthis.name = 'spike';\r\n\t}\r\n}\r\n\r\nfunction createSpikeGeometry({\r\n\twidth = spike.width,\r\n\tsegments = spike.segments\r\n} = {}) {\r\n\tvar geometry = new THREE.SphereGeometry(width / 4, segments * 10);\r\n\r\n\tfor (var i = 0; i < geometry.vertices.length; i += 10) {\r\n\t\tgeometry.vertices[i].x = geometry.vertices[i].x * 2;\r\n\t\tgeometry.vertices[i].y = geometry.vertices[i].y * 2;\r\n\t\tgeometry.vertices[i].z = geometry.vertices[i].z * 2;\r\n\t}\r\n\r\n\treturn geometry;\r\n}\r\n","import * as THREE from 'three';\r\n\r\nimport Bomb from './objects/bomb';\r\nimport Flag from './objects/flag';\r\nimport Gate from './objects/gate';\r\nimport Spike from './objects/spike';\r\nimport * as utils from './utils';\r\n\r\nvar options;\r\nvar materials;\r\n\r\nexport default class ObjectManager {\r\n\tconstructor(config) {\r\n\t\toptions = config.objects;\r\n\t\tmaterials = config.materials;\r\n\t}\r\n\r\n\tbomb(obj = new Bomb(materials.bomb)) {\r\n\t\treturn obj.show();\r\n\t}\r\n\r\n\tbombHidden(obj = new Bomb(materials.bomb)) {\r\n\t\treturn obj.hide();\r\n\t}\r\n\r\n\tflagRed(obj = new Flag(materials.flag.red, options.flag)) {\r\n\t\treturn obj.show();\r\n\t}\r\n\r\n\tflagRedTaken(obj = new Flag(materials.flag.red, options.flag)) {\r\n\t\treturn obj.hide();\r\n\t}\r\n\r\n\tflagBlue(obj = new Flag(materials.flag.blue, options.flag)) {\r\n\t\treturn obj.show();\r\n\t}\r\n\r\n\tflagBlueTaken(obj = new Flag(materials.flag.blue, options.flag)) {\r\n\t\treturn obj.hide();\r\n\t}\r\n\r\n\tflagYellow(obj = new Flag(materials.flag.yellow, options.flag)) {\r\n\t\treturn obj.show();\r\n\t}\r\n\r\n\tflagYellowTaken(obj = new Flag(materials.flag.yellow, options.flag)) {\r\n\t\treturn obj.hide();\r\n\t}\r\n\r\n\tgateOff(obj = new Gate(materials.gate, options.gate)) {\r\n\t\treturn obj.off();\r\n\t}\r\n\r\n\tgateRed(obj = new Gate(materials.gate, options.gate)) {\r\n\t\treturn obj.red();\r\n\t}\r\n\r\n\tgateGreen(obj = new Gate(materials.gate, options.gate)) {\r\n\t\treturn obj.green();\r\n\t}\r\n\r\n\tgateBlue(obj = new Gate(materials.gate, options.gate)) {\r\n\t\treturn obj.blue();\r\n\t}\r\n\r\n\tspike(obj = new Spike(materials.spike, options.spike)) {\r\n\t\treturn obj;\r\n\t}\r\n\r\n\tbyTileId(id) {\r\n\t\tswitch(id) {\r\n\t\tcase 3: return this.flagRed;\r\n\t\tcase 3.1: return this.flagRedTaken;\r\n\t\tcase 4: return this.flagBlue;\r\n\t\tcase 4.1: return this.flagBlueTaken;\r\n\t\tcase 16: return this.flagYellow;\r\n\t\tcase 16.1: return this.flagYellowTaken;\r\n\t\tcase 7: return this.spike;\r\n\t\tcase 9: return this.gateOff;\r\n\t\tcase 9.1: return this.gateGreen;\r\n\t\tcase 9.2: return this.gateRed;\r\n\t\tcase 9.3: return this.gateBlue;\r\n\t\tcase 10: return this.bomb;\r\n\t\tcase 10.1: return this.bombHidden;\r\n\t\t// floor: 2,\r\n\t\t// powerupNone: 6,\r\n\t\t}\r\n\t}\r\n}\r\n","import * as THREE from 'three';\r\nimport $ from 'jquery';\r\n\r\nimport * as clipper from './clipper';\r\nimport * as utils from './utils';\r\nimport * as lights from './lights';\r\nimport ObjectManager from './object_manager';\r\n\r\nvar tagpro;\r\nvar loader = new THREE.TextureLoader();\r\n\r\nconst AXIS_X = new THREE.Vector3(1, 0, 0);\r\nconst AXIS_Y = new THREE.Vector3(0, 1, 0);\r\nconst AXIS_Z = new THREE.Vector3(0, 0, 1);\r\nvar quaternion = new THREE.Quaternion();\r\n\r\nexport default class World {\r\n\tconstructor(tp, config) {\r\n\t\ttagpro = tp;\r\n\r\n\t\tthis.config = config;\r\n\t\tthis.materials = config.materials;\r\n\t\tthis.ballConfig = config.objects.ball;\r\n\r\n\t\tthis.camera = utils.createCamera(config.camera);\r\n\t\tthis.renderer = utils.createRenderer(config.renderer);\r\n\t\tthis.scene = utils.createScene();\r\n\r\n\t\tthis.scene.add(this.camera);\r\n\r\n\t\tlights.addLights(this.config.lights, this.scene, this.camera);\r\n\r\n\t\tthis._updatables = [];\r\n\t\tthis._updatablesLength = 0;\r\n\r\n\t\tthis.players = [];\r\n\t\tthis.manager = new ObjectManager(config);\r\n\t}\r\n\r\n\tinitObjects(width, height) {\r\n\t\t// Create blank array of 3D objects\r\n\t\tthis.objects = Array(width);\r\n\t\tfor (let i = 0; i < width; i++) {\r\n\t\t\tthis.objects[i] = Array(height);\r\n\t\t}\r\n\t}\r\n\r\n\tdrawWalls(map, pixiLayers) {\r\n\t\tvar extrude = this.config.objects.wall.extrude;\r\n\r\n\t\tvar shapes = clipper.createShapesFromTilemap({\r\n\t\t\tdata: map,\r\n\t\t\ttileSize: this.config.tileSize,\r\n\t\t\tdiluteDelta: -extrude.bevelSize\r\n\t\t});\r\n\r\n\t\tvar geometry = new THREE.ExtrudeGeometry(shapes, extrude);\r\n\t\tvar material = utils.createMaterial(this.materials.wall);\r\n\r\n\t\tvar width = map.length * this.config.tileSize;\r\n\t\tvar height = map[0].length * this.config.tileSize;\r\n\r\n\t\tvar mesh = new THREE.Mesh(geometry, material);\r\n\t\tmesh.position.set(-this.config.tileSize / 2, -this.config.tileSize / 2, -extrude.amount);\r\n\r\n\t\ttagpro.walls = mesh;\r\n\r\n\t\tthis.scene.add(mesh);\r\n\t}\r\n\r\n\tdrawDynamicTile(original, col, row) {\r\n\t\tvar tile = tagpro.map[col][row];\r\n\t\tvar createOrUpdateObject = this.manager.byTileId(tile);\r\n\r\n\t\tvar mesh = this.objects[col][row];\r\n\r\n\t\tif (createOrUpdateObject) {\r\n\t\t\tif (!mesh) {\r\n\t\t\t\tvar x = col * this.config.tileSize;\r\n\t\t\t\tvar y = row * this.config.tileSize;\r\n\r\n\t\t\t\t// HACK: Replace gates with floor tiles\r\n\t\t\t\tif (~~tile === 9)\r\n\t\t\t\t\ttagpro.tiles.draw(tagpro.renderer.layers.midground, 2, { x, y });\r\n\r\n\t\t\t\tmesh = createOrUpdateObject.call(this.manager);\r\n\t\t\t\tmesh.position.set(x, y, 0);\r\n\t\t\t\tthis.scene.add(mesh);\r\n\t\t\t\tthis.objects[col][row] = mesh;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tcreateOrUpdateObject.call(this.manager, mesh);\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\toriginal(col, row); // falls back to original tagpro function\r\n\t\t}\r\n\t}\r\n\r\n\trender(time, delta) {\r\n\t\tthis.renderer.render(this.scene, this.camera);\r\n\t}\r\n\r\n\tupdate(time, delta) {\r\n\t\tfor (var i = 0; i < this._updatablesLength; i++) {\r\n\t\t\tlet obj = this._updatables[i];\r\n\r\n\t\t\tif (!obj) continue;\r\n\r\n\t\t\tif (obj.visible) {\r\n\t\t\t\tobj.update(time, delta);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tupdateCanvas(tagproCanvas) {\r\n\t\t$(this.renderer.domElement).css({\r\n\t\t\tleft: tagproCanvas.offsetLeft,\r\n\t\t\ttop: tagproCanvas.offsetTop,\r\n\t\t\twidth: null,\r\n\t\t\theight: null\r\n\t\t}).attr({\r\n\t\t\twidth: tagproCanvas.width,\r\n\t\t\theight: tagproCanvas.height\r\n\t\t});\r\n\r\n\t\tthis.renderer.setSize(tagproCanvas.width, tagproCanvas.height);\r\n\t\tutils.updateCameraFOV(this.camera, tagproCanvas.height);\r\n\t}\r\n\r\n\tupdateCameraPosition(x, y) {\r\n\t\tthis.camera.position.x = x;\r\n\t\tthis.camera.position.y = y;\r\n\t}\r\n\r\n\tupdateCameraZoom(zoom) {\r\n\t\tif (this.zoom !== zoom) {\r\n\t\t\tthis.zoom = zoom;\r\n\t\t\tthis.camera.zoom = 1 / this.zoom;\r\n\t\t\tthis.camera.updateProjectionMatrix();\r\n\t\t}\r\n\t}\r\n\r\n\taddPlayer(player) {\r\n\t\tif (!player) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar config = this.config.objects.ball;\r\n\r\n\t\tvar geometry = config.isPuck ? utils.createPuckGeometry(config.puck) : utils.createSphereGeometry(config.sphere);\r\n\t\tvar material = utils.createMaterial(this.materials.ball.default);\r\n\t\tvar object = new THREE.Mesh(geometry, material);\r\n\r\n\t\tif (config.hasOutline) {\r\n\t\t\tlet material = utils.createMaterial(this.materials.ball.outline);\r\n\t\t\tlet geometry = utils.createSphereGeometry(config.outline);\r\n\t\t\tvar outline = new THREE.Mesh(geometry, material);\r\n\t\t\tobject.add(outline);\r\n\t\t}\r\n\r\n\t\tthis.scene.add(object);\r\n\t\tthis.players[player.id] = object;\r\n\t}\r\n\r\n\tremovePlayer(player) {\r\n\t\tif (!player) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis.scene.remove(this.players[player.id]);\r\n\t\tdelete this.players[player.id];\r\n\t}\r\n\r\n\tupdatePlayerPosition(player) {\r\n\t\tif (!player) return;\r\n\r\n\t\tvar object = this.players[player.id];\r\n\t\tif (!object) return;\r\n\r\n\t\tobject.position.x = player.x;\r\n\t\tobject.position.y = player.y;\r\n\r\n\t\tif (!this.ballConfig.isPuck) {\r\n\t\t\tquaternion.setFromAxisAngle(AXIS_Y, -(player.lx || 0) * this.ballConfig.velocityCoefficient);\r\n\t\t\tobject.quaternion.multiplyQuaternions(quaternion, object.quaternion);\r\n\t\t\tquaternion.setFromAxisAngle(AXIS_X, (player.ly || 0) * this.ballConfig.velocityCoefficient);\r\n\t\t\tobject.quaternion.multiplyQuaternions(quaternion, object.quaternion);\r\n\t\t}\r\n\r\n\t\tquaternion.setFromAxisAngle(AXIS_Z, (player.a || 0) * this.ballConfig.rotationCoefficient);\r\n\t\tobject.quaternion.multiplyQuaternions(quaternion, object.quaternion);\r\n\t}\r\n\r\n\tupdatePlayerColor(player) {\r\n\t\tvar object = this.players[player.id];\r\n\t\tif (!object) return;\r\n\r\n\t\tvar params = player.team === 1 ? this.materials.ball.red : this.materials.ball.blue;\r\n\t\tobject.material.setValues(params);\r\n\t}\r\n}\r\n","import tagpro from 'tagpro';\r\nimport * as THREE from 'three';\r\n\r\nimport defaults from './config/defaults';\r\nimport Detector from './vendor/Detector';\r\nimport World from './lib/world';\r\n\r\nconst styles = `\r\n\t#walls3d {\r\n\t\tdisplay: block;\r\n\t\tpointer-events: none;\r\n\t\tposition: absolute;\r\n\t\tz-index: 1000;\r\n\t}\r\n\t#options {\r\n\t\tz-index: 2000;\r\n\t}\r\n`;\r\n\r\nfunction init() {\r\n\tGM_addStyle(styles);\r\n\r\n\tif (!Detector.webgl) {\r\n\t\tDetector.addGetWebGLMessage();\r\n\t\treturn;\r\n\t}\r\n\r\n\tvar tr = tagpro.renderer;\r\n\tvar canvas = tr.canvas;\r\n\tvar zoom;\r\n\r\n\tvar config = defaults;\r\n\r\n\tvar world = new World(tagpro, config);\r\n\r\n\ttagpro.tagpro3d = world;\r\n\r\n\ttr.drawDynamicTile = world.drawDynamicTile.bind(world, tr.drawDynamicTile);\r\n\r\n\tafter(tr, 'drawBackgroundTiles', () => {\r\n\t\tworld.drawWalls(tagpro.map);\r\n\t\tworld.initObjects(tagpro.map.length, tagpro.map[0].length);\r\n\t});\r\n\r\n\tafter(tr, 'render', () => world.render());\r\n\r\n\tafter(tr, 'centerView', world.updateCanvas.bind(world, tr.canvas));\r\n\tworld.updateCanvas(tr.canvas);\r\n\r\n\tafter(tr, 'centerContainerToPoint', (x, y) => {\r\n\t\tworld.updateCameraPosition(x - 19, y - 19);\r\n\t\tworld.updateCameraZoom(tagpro.zoom);\r\n\t});\r\n\r\n\tafter(tr, 'createBallSprite', function(player) {\r\n\t\t// console.log('adding ball to canvas', player.id, player.name);\r\n\t\tworld.addPlayer(player);\r\n\t});\r\n\r\n\tafter(tr, 'destroyPlayer', function(player) {\r\n\t\t// console.log('removing ball from canvas', player.id, player.name);\r\n\t\tworld.removePlayer(player);\r\n\t});\r\n\r\n\tafter(tr, 'updatePlayerSpritePosition', function(player) {\r\n\t\tworld.updatePlayerPosition(player);\r\n\t});\r\n\r\n\tafter(tr, 'updatePlayerColor', function(player) {\r\n\t\tworld.updatePlayerColor(player);\r\n\t});\r\n\r\n\tvar time, delta;\r\n\tvar lastTime = performance.now() * 0.001;\r\n\r\n\ttagpro.events.register({\r\n\t\tupdate: function() {\r\n\t\t\ttime = performance.now() * 0.001;\r\n\t\t\tdelta = time - lastTime;\r\n\t\t\tworld.update(time, delta);\r\n\t\t}\r\n\t});\r\n\r\n\tconsole.log('TagPro 3D Initialized.');\r\n}\r\n\r\nfunction after(obj, methodName, callback) {\r\n\tvar orig = obj[methodName];\r\n\tobj[methodName] = function() {\r\n\t\tvar result = orig.apply(this, arguments);\r\n\t\tcallback.apply(this, arguments);\r\n\t\treturn result;\r\n\t};\r\n}\r\n\r\ntagpro.ready.after(init);\r\n"],"names":["TILE_SIZE","Clipper","ClipperUtils","PolyFillType","ClipperOffset","JoinType","EndType","PolyTree","objectProto","objectToString","loader","defaults","utils.createClothGeometry","utils.createMaterial","utils.createRectangleGeometry","tagpro","utils.createCamera","utils.createRenderer","utils.createScene","clipper.createShapesFromTilemap","utils.createPuckGeometry","utils.createSphereGeometry","config"],"mappings":"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"}