{"version":3,"file":"tagpro-3d.user.js","sources":["../src/lib/utils.js","../src/lib/hacks.js","../src/styles.css","../src/tagpro3d/lights.js","../src/tagpro3d/objects/ball.js","../src/tagpro3d/objects/bomb.json","../src/tagpro3d/utils.js","../src/tagpro3d/objects/bomb.js","../src/tagpro3d/geometries.js","../src/tagpro3d/objects/gate.js","../src/tagpro3d/objects/puck.js","../src/tagpro3d/objects/spike.js","../src/tagpro3d/objects.js","../src/lib/clipper.js","../src/tagpro3d/walls.js","../src/options/objects.js","../src/options/index.js","../src/tagpro3d/index.js","../src/index.js"],"sourcesContent":["export function after(obj, methodName, callback) {\r\n\tvar orig = obj[methodName];\r\n\tobj[methodName] = function() {\r\n\t\tvar result = orig.apply(this, arguments);\r\n\t\tcallback.apply(this, arguments);\r\n\t\treturn result;\r\n\t};\r\n}\r\n\r\nexport function addStyles(styles) {\r\n\tGM_addStyle(styles);\r\n}","/**\r\n * Delays callbacks when resourcesLoaded == true, so it's possible to run stuff\r\n * between tagpro.ready and tagpro.ready.after.\r\n */\r\nexport function readyAfter(tagpro, callback) {\r\n\tif (tagpro.resourcesLoaded) {\r\n\t\tsetTimeout(callback, 0);\r\n\t}\r\n\telse {\r\n\t\ttagpro._afterReadyCallbacks.push(callback);\r\n\t}\r\n}\r\n\r\nexport function drawExtraFloors(tagpro) {\r\n\tconst flooredTiles = [\r\n\t\t9, 9.1, 9.2, 9.3, // gates\r\n\t\t17, 18 // goal tiles\r\n\t];\r\n\r\n\tflooredTiles.forEach(tile => {\r\n\t\ttagpro.tiles[tile].drawFloor = true;\r\n\t\ttagpro.tiles[tile].redrawFloor = false;\r\n\t});\r\n}\r\n\r\n/**\r\n * Draws some extra tiles to the background layer.\r\n */\r\nexport function drawExtraTilesToBackground(tagpro) {\r\n\tvar tileSize = tagpro.TILE_SIZE;\r\n\tvar width = tagpro.map.length;\r\n\tvar height = tagpro.map[0].length;\r\n\tvar container = tagpro.renderer.layers.background;\r\n\r\n\tvar tile;\r\n\tfor (var col = 0; col !== width; col++) {\r\n\t\tlet x = col * tileSize;\r\n\t\tfor (var row = 0; row !== height; row++) {\r\n\t\t\tlet y = row * tileSize;\r\n\t\t\ttile = tagpro.map[col][row];\r\n\r\n\t\t\tif (~~tile === 9) {\r\n\t\t\t\t// Floor tiles beneath gates\r\n\t\t\t\ttagpro.tiles.draw(container, 2, { x, y });\r\n\t\t\t}\r\n\t\t\telse if (tile === 17 || tile === 18) {\r\n\t\t\t\t// Goal tiles\r\n\t\t\t\ttagpro.tiles.draw(container, tile, { x, y });\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}","#tagpro3d {\r\n\tdisplay: block;\r\n\tpointer-events: none;\r\n\tposition: absolute;\r\n\tz-index: 1;\r\n}\r\n\r\n#viewport {\r\n\tz-index: 2;\r\n}\r\n\r\n#options {\r\n\tz-index: 3;\r\n}\r\n","import * as THREE from 'three';\r\n\r\nexport function addAmbientLight(scene, {\r\n\tcolor = 0xffffff\r\n} = {}) {\r\n\tvar light = new THREE.AmbientLight(color);\r\n\tscene.add(light);\r\n\treturn light;\r\n}\r\n\r\nexport function addCameraLight(camera, {\r\n\tcolor = 0xffffff,\r\n\tintensity = 1,\r\n\tdistance = 0,\r\n\tdecay = 0\r\n} = {}) {\r\n\tvar light = new THREE.PointLight(color, intensity, distance, decay);\r\n\tcamera.add(light);\r\n\treturn light;\r\n}\r\n\r\nexport function addDirectionalLight(scene, {\r\n\tcolor = 0xffffff,\r\n\tintensity = 1.0,\r\n\tposition = [500, -500, 400]\r\n} = {}) {\r\n\tvar light = new THREE.DirectionalLight(color, intensity);\r\n\tlight.position.set.apply(light.position, position);\r\n\tscene.add(light);\r\n\treturn light;\r\n}\r\n\r\nexport function addLights(lights, scene, camera) {\r\n\tlights.forEach(light => {\r\n\t\tif (!light.enabled) return;\r\n\r\n\t\tif (light.type === 'camera') {\r\n\t\t\taddCameraLight(camera, light);\r\n\t\t}\r\n\t\telse if (light.type === 'ambient') {\r\n\t\t\taddAmbientLight(scene, light);\r\n\t\t}\r\n\t\telse if (light.type === 'directional') {\r\n\t\t\taddDirectionalLight(scene, light);\r\n\t\t}\r\n\t});\r\n}","import * as THREE from 'three';\r\n\r\nconst tempQuaternion = new THREE.Quaternion();\r\nconst AXIS_X = new THREE.Vector3(1, 0, 0);\r\nconst AXIS_Y = new THREE.Vector3(0, 1, 0);\r\nconst AXIS_Z = new THREE.Vector3(0, 0, 1);\r\n\r\nexport default class Ball extends THREE.Mesh {\r\n\tconstructor(options) {\r\n\t\tvar material = new THREE.MeshPhongMaterial();\r\n\t\tvar geometry = new THREE.IcosahedronGeometry(options.geometry.radius, options.geometry.detail);\r\n\t\t// var geometry = new THREE.SphereGeometry(options.geometry.radius, 12, 8);\r\n\r\n\t\tsuper(geometry, material);\r\n\r\n\t\tthis.options = options;\r\n\t\tthis._createOutline();\r\n\t}\r\n\r\n\t_createOutline() {\r\n\t\tvar outline = this.options.outline;\r\n\r\n\t\tif (outline && outline.enabled) {\r\n\t\t\tvar radius = this.options.geometry.radius;\r\n\t\t\tvar geometry = new THREE.IcosahedronGeometry(radius, outline.detail);\r\n\r\n\t\t\tthis.outlineMaterial = new THREE.MeshBasicMaterial({ side: THREE.BackSide });\r\n\t\t\tthis.add(new THREE.Mesh(geometry, this.outlineMaterial));\r\n\r\n\t\t\tvar scale = 1 - (outline.width / radius);\r\n\t\t\tthis.geometry.scale(scale, scale, scale);\r\n\r\n\t\t\tthis.position.y = radius;\r\n\t\t}\r\n\t}\r\n\r\n\tupdateColor(player) {\r\n\t\tvar material = this.options.material;\r\n\t\tthis.material.setValues(player.team === 1 ? material.red : material.blue);\r\n\r\n\t\tvar outline = this.options.outline;\r\n\t\tif (outline && outline.enabled) {\r\n\t\t\tthis.outlineMaterial.setValues(player.team === 1 ? outline.red : outline.blue);\r\n\t\t}\r\n\t}\r\n\r\n\tupdatePosition(player) {\r\n\t\tthis.position.x = player.sprite.x;\r\n\t\tthis.position.z = player.sprite.y;\r\n\r\n\t\ttempQuaternion.setFromAxisAngle(AXIS_X, (player.ly || 0) * this.options.velocityCoefficient);\r\n\t\tthis.quaternion.multiplyQuaternions(tempQuaternion, this.quaternion);\r\n\r\n\t\ttempQuaternion.setFromAxisAngle(AXIS_Z, -(player.lx || 0) * this.options.velocityCoefficient);\r\n\t\tthis.quaternion.multiplyQuaternions(tempQuaternion, this.quaternion);\r\n\r\n\t\ttempQuaternion.setFromAxisAngle(AXIS_Y, -(player.a || 0) * this.options.rotationCoefficient);\r\n\t\tthis.quaternion.multiplyQuaternions(tempQuaternion, this.quaternion);\r\n\t}\r\n}\r\n","{\r\n\t\"metadata\": {\r\n\t\t\"version\": 4.4,\r\n\t\t\"type\": \"Object\",\r\n\t\t\"generator\": \"Object3D.toJSON\"\r\n\t},\r\n\t\"geometries\": [\r\n\t\t{\r\n\t\t\t\"uuid\": \"533B036E-7BD8-412A-9826-C270344C731B\",\r\n\t\t\t\"type\": \"SphereGeometry\",\r\n\t\t\t\"radius\": 16,\r\n\t\t\t\"widthSegments\": 16,\r\n\t\t\t\"heightSegments\": 16,\r\n\t\t\t\"phiStart\": 0,\r\n\t\t\t\"phiLength\": 6.283185307179586,\r\n\t\t\t\"thetaStart\": 0,\r\n\t\t\t\"thetaLength\": 3.141592653589793\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"uuid\": \"EDC5A60E-30F9-46AD-8F00-57694EA6046F\",\r\n\t\t\t\"type\": \"CylinderGeometry\",\r\n\t\t\t\"radiusTop\": 2,\r\n\t\t\t\"radiusBottom\": 3,\r\n\t\t\t\"height\": 3,\r\n\t\t\t\"radialSegments\": 32,\r\n\t\t\t\"heightSegments\": 1,\r\n\t\t\t\"openEnded\": false\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"uuid\": \"D0B38B94-F57F-43DA-B2D5-EE90F990436E\",\r\n\t\t\t\"type\": \"TorusGeometry\",\r\n\t\t\t\"radius\": 4.38,\r\n\t\t\t\"tube\": 0.76,\r\n\t\t\t\"radialSegments\": 8,\r\n\t\t\t\"tubularSegments\": 4,\r\n\t\t\t\"arc\": 1.5\r\n\t\t}],\r\n\t\"materials\": [\r\n\t\t{\r\n\t\t\t\"uuid\": \"1F3DD044-3AE4-4584-86A8-C8456E25A261\",\r\n\t\t\t\"type\": \"MeshPhongMaterial\",\r\n\t\t\t\"color\": 0,\r\n\t\t\t\"emissive\": 0,\r\n\t\t\t\"specular\": 1118481,\r\n\t\t\t\"shininess\": 30\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"uuid\": \"F74765F4-EA20-4137-94DD-F083E9E5D714\",\r\n\t\t\t\"type\": \"MeshPhongMaterial\",\r\n\t\t\t\"color\": 8421504,\r\n\t\t\t\"emissive\": 0,\r\n\t\t\t\"specular\": 1118481,\r\n\t\t\t\"shininess\": 30\r\n\t\t},\r\n\t\t{\r\n\t\t\t\"uuid\": \"0E765FB3-278F-4EFE-BE0F-656922DD6B22\",\r\n\t\t\t\"type\": \"MeshPhongMaterial\",\r\n\t\t\t\"color\": 16777215,\r\n\t\t\t\"emissive\": 0,\r\n\t\t\t\"specular\": 1118481,\r\n\t\t\t\"shininess\": 30\r\n\t\t}],\r\n\t\"object\": {\r\n\t\t\"uuid\": \"DA35D27C-42A2-431C-88DE-E56516B50BBC\",\r\n\t\t\"type\": \"Mesh\",\r\n\t\t\"name\": \"bomb\",\r\n\t\t\"matrix\": [0.7899922132492065,-0.4315394461154938,0.43552955985069275,0,0.6131168603897095,0.5560322999954224,-0.5611735582351685,0,0,0.7103532552719116,0.7038453221321106,0,0,0,0,1],\r\n\t\t\"geometry\": \"533B036E-7BD8-412A-9826-C270344C731B\",\r\n\t\t\"material\": \"1F3DD044-3AE4-4584-86A8-C8456E25A261\",\r\n\t\t\"children\": [\r\n\t\t\t{\r\n\t\t\t\t\"uuid\": \"3DD112B4-0A42-4E6A-A96D-5BF76D3D877D\",\r\n\t\t\t\t\"type\": \"Mesh\",\r\n\t\t\t\t\"name\": \"head\",\r\n\t\t\t\t\"matrix\": [1,0,0,0,0,1,0,0,0,0,1,0,0.36041587591171265,16.43364143371582,2.5216023921966553,1],\r\n\t\t\t\t\"geometry\": \"EDC5A60E-30F9-46AD-8F00-57694EA6046F\",\r\n\t\t\t\t\"material\": \"F74765F4-EA20-4137-94DD-F083E9E5D714\",\r\n\t\t\t\t\"children\": [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t\"uuid\": \"36583292-82F4-43A0-A341-165C18F8536A\",\r\n\t\t\t\t\t\t\"type\": \"Mesh\",\r\n\t\t\t\t\t\t\"name\": \"fuse\",\r\n\t\t\t\t\t\t\"matrix\": [-0.7485897541046143,-0.19866932928562164,0.6325692534446716,0,-0.15174666047096252,0.9800665974617004,0.12822814285755157,0,-0.6454349756240845,0,-0.7638152241706848,0,3.29097580909729,1.9205838441848755,-2.8663127422332764,1],\r\n\t\t\t\t\t\t\"geometry\": \"D0B38B94-F57F-43DA-B2D5-EE90F990436E\",\r\n\t\t\t\t\t\t\"material\": \"0E765FB3-278F-4EFE-BE0F-656922DD6B22\"\r\n\t\t\t\t\t}]\r\n\t\t\t}]\r\n\t}\r\n}","import $ from 'jquery';\r\nimport * as THREE from 'three';\r\n\r\nexport const textureLoader = new THREE.TextureLoader();\r\ntextureLoader.setCrossOrigin('');\r\n\r\nexport const objectLoader = new THREE.ObjectLoader();\r\n\r\nconst RAD = 180 / Math.PI;\r\n\r\nexport function createRenderer(params) {\r\n\tvar renderer = new THREE.WebGLRenderer(params);\r\n\r\n\trenderer.domElement.id = 'tagpro3d';\r\n\tdocument.body.appendChild(renderer.domElement);\r\n\r\n\treturn renderer;\r\n}\r\n\r\nexport function createCamera({ fov = 75, aspect = 1280/800, near, far, distance }) {\r\n\tvar camera = new THREE.PerspectiveCamera(fov, aspect, near, far);\r\n\tcamera.position.y = distance;\r\n\tconsole.log(camera.position);\r\n\tcamera.up.set(0, 0, -1);\r\n\tcamera.lookAt(new THREE.Vector3(0, 0, 0));\r\n\treturn camera;\r\n}\r\n\r\nexport function createScene() {\r\n\tvar scene = new THREE.Scene();\r\n\treturn scene;\r\n}\r\n\r\nexport function resizeCanvas(renderer, gameCanvas) {\r\n\t$(renderer.domElement).css({\r\n\t\tleft: gameCanvas.offsetLeft,\r\n\t\ttop: gameCanvas.offsetTop,\r\n\t\twidth: null,\r\n\t\theight: null\r\n\t}).attr({\r\n\t\twidth: gameCanvas.width,\r\n\t\theight: gameCanvas.height\r\n\t});\r\n\r\n\trenderer.setSize(gameCanvas.width, gameCanvas.height);\r\n}\r\n\r\nexport function updateCameraFOV(camera, gameCanvas) {\r\n\tcamera.aspect = gameCanvas.width / gameCanvas.height;\r\n\tcamera.fov = 2 * Math.atan(gameCanvas.height / (camera.position.y * 2)) * RAD;\r\n\tcamera.updateProjectionMatrix();\r\n}\r\n\r\nexport function updateCameraPosition(camera, x, y) {\r\n\tcamera.position.x = x - 19;\r\n\tcamera.position.z = y - 19;\r\n}\r\n\r\nexport function updateCameraZoom(camera, zoom) {\r\n\tcamera.zoom = 1 / zoom;\r\n\tcamera.updateProjectionMatrix();\r\n}\r\n\r\n// TODO: Use single PlaneGeometry with faceVertexUvs.\r\nexport function createBackgroundPlaneFromChunks(chunks) {\r\n\tvar plane = new THREE.Object3D();\r\n\tplane.position.x = -19;\r\n\tplane.position.z = -19;\r\n\r\n\tvar geometry;\r\n\tchunks.forEach(({ x, y, width, height, texture }) => {\r\n\t\tif (!geometry) {\r\n\t\t\tgeometry = new THREE.PlaneGeometry(width, height, 1, 1);\r\n\t\t\tgeometry.rotateX(-Math.PI / 2);\r\n\t\t\tgeometry.translate(width / 2, 0, height / 2);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tgeometry = geometry.clone();\r\n\t\t}\r\n\r\n\t\tvar material = new THREE.MeshPhongMaterial({\r\n\t\t\tmap: new THREE.CanvasTexture(texture.baseTexture.source)\r\n\t\t});\r\n\r\n\t\tvar mesh = new THREE.Mesh(geometry, material);\r\n\t\tmesh.position.x = x;\r\n\t\tmesh.position.z = y;\r\n\r\n\t\tplane.add(mesh);\r\n\t});\r\n\r\n\treturn plane;\r\n}\r\n\r\nexport function mapBackgroundChunksToTextures(chunks) {\r\n\treturn chunks.map(({ x, y, width, height, texture }) => ({\r\n\t\tx, y, width, height,\r\n\t\ttexture: new THREE.CanvasTexture(texture.baseTexture.source)\r\n\t}));\r\n}\r\n\r\nexport function loadObjectFromJson(json) {\r\n\tvar mesh = objectLoader.parse(json);\r\n\t// mesh.rotateZ(Math.PI);\r\n\treturn mesh;\r\n}\r\n","import * as THREE from 'three';\r\n\r\nimport bombJson from './bomb.json';\r\nimport { loadObjectFromJson } from '../utils';\r\n\r\nexport default class Bomb extends THREE.Object3D {\r\n\tconstructor(options = {}) {\r\n\t\tsuper();\r\n\r\n\t\tvar mesh = loadObjectFromJson(bombJson);\r\n\t\tthis.add(mesh);\r\n\t\tthis.getObjectByName('bomb').material.setValues(options.material.body);\r\n\r\n\t\tthis.options = options;\r\n\t}\r\n\r\n\tshow() {\r\n\t\tvar values = this.options.material.show;\r\n\r\n\t\tthis.traverse(o => {\r\n\t\t\tif (!o.material) return;\r\n\t\t\to.material.setValues(values);\r\n\t\t});\r\n\r\n\t\treturn this;\r\n\t}\r\n\r\n\thide() {\r\n\t\tvar values = this.options.material.hide;\r\n\r\n\t\tthis.traverse(o => {\r\n\t\t\tif (!o.material) return;\r\n\t\t\to.material.setValues(values);\r\n\t\t});\r\n\r\n\t\treturn this;\r\n\t}\r\n}","import * as THREE from 'three';\r\n\r\nexport function createRectangleShape(width) {\r\n\tvar half = width / 2;\r\n\r\n\tvar shape = new THREE.Shape();\r\n\tshape.moveTo(-half, -half);\r\n\tshape.lineTo(half, -half);\r\n\tshape.lineTo(half, half);\r\n\tshape.lineTo(-half, half);\r\n\r\n\treturn shape;\r\n}\r\n\r\nexport function createRectangleGeometry(width, extrude = {}) {\r\n\tvar shape = createRectangleShape(width);\r\n\r\n\tvar geometry = extrudeShape(shape, extrude, width);\r\n\r\n\treturn geometry;\r\n}\r\n\r\nexport function createClothGeometry({\r\n\twidth,\r\n\theight,\r\n\twidthSegments = 10,\r\n\theightSegments = 5,\r\n\twaveDepth = 10\r\n}) {\r\n\tvar geometry = new THREE.PlaneGeometry(width, height, widthSegments, heightSegments);\r\n\tgeometry.translate(width / 2, height / 2, 0);\r\n\r\n\tfor (var col = 0; col <= widthSegments; col++) {\r\n\t\tlet z = Math.sin((col / widthSegments) * Math.PI * 2) * waveDepth;\r\n\t\tfor (var row = 0; row <= heightSegments; row++) {\r\n\t\t\tgeometry.vertices[row * (widthSegments + 1) + col].z = z;\r\n\t\t}\r\n\t}\r\n\r\n\treturn geometry;\r\n}\r\n\r\nexport function extrudeShape(shape, extrude, width) {\r\n\tvar radius = width / 2;\r\n\tvar geometry = shape.extrude(extrude);\r\n\tgeometry.translate(0, 0, -extrude.amount);\r\n\r\n\tif (extrude.bevelEnabled) {\r\n\t\tvar xy = 1 / ((radius + extrude.bevelSize) / radius);\r\n\t\tgeometry.scale(xy, xy, 1);\r\n\t}\r\n\r\n\treturn geometry;\r\n}","import * as THREE from 'three';\r\n\r\nimport * as geometries from '../geometries';\r\n\r\nvar geometry;\r\n\r\nexport default class Gate extends THREE.Mesh {\r\n\tconstructor(options = {}) {\r\n\r\n\t\tif (!geometry) geometry = geometries.createRectangleGeometry(options.geometry.width, options.extrude);\r\n\t\tvar material = new THREE.MeshPhongMaterial(options.material.off);\r\n\r\n\t\tsuper(geometry, material);\r\n\r\n\t\tthis.rotateX(Math.PI / 2);\r\n\r\n\t\tthis.name = 'gate';\r\n\t\tthis.options = options;\r\n\r\n\t\tthis._addOutline();\r\n\t}\r\n\r\n\t_addOutline() {\r\n\t\tvar geom = new THREE.EdgesGeometry(this.geometry, 0.1);\r\n\t\tvar mat = new THREE.LineBasicMaterial(this.options.material.outline);\r\n\r\n\t\tthis.outline = new THREE.LineSegments(geom, mat);\r\n\t\tthis.outline.matrixAutoUpdate = false;\r\n\r\n\t\tthis.add(this.outline);\r\n\t}\r\n\r\n\toff() {\r\n\t\tthis.outline.visible = true;\r\n\t\tthis.material.setValues(this.options.material.off);\r\n\t\treturn this;\r\n\t}\r\n\r\n\tred() {\r\n\t\tthis.outline.visible = false;\r\n\t\tthis.material.setValues(this.options.material.red);\r\n\t\treturn this;\r\n\t}\r\n\r\n\tgreen() {\r\n\t\tthis.outline.visible = false;\r\n\t\tthis.material.setValues(this.options.material.green);\r\n\t\treturn this;\r\n\t}\r\n\r\n\tblue() {\r\n\t\tthis.outline.visible = false;\r\n\t\tthis.material.setValues(this.options.material.blue);\r\n\t\treturn this;\r\n\t}\r\n}\r\n","import * as THREE from 'three';\r\n\r\nimport { extrudeShape } from '../geometries';\r\n\r\nconst tempQuaternion = new THREE.Quaternion();\r\nconst AXIS_Y = new THREE.Vector3(0, 1, 0);\r\n\r\nexport default class Puck extends THREE.Mesh {\r\n\tconstructor(options) {\r\n\t\tvar material = new THREE.MeshPhongMaterial();\r\n\t\tvar geometry = createPuckGeometry(options.geometry, options.extrude);\r\n\t\t// var geometry = new THREE.SphereGeometry(options.geometry.radius, 12, 8);\r\n\r\n\t\tsuper(geometry, material);\r\n\r\n\t\tthis.rotateX(Math.PI / 2);\r\n\r\n\t\tthis.options = options;\r\n\t\tthis._createOutline();\r\n\t}\r\n\r\n\t_createOutline() {\r\n\t\tvar outline = this.options.outline;\r\n\r\n\t\tif (outline && outline.enabled) {\r\n\t\t\tvar radius = this.options.geometry.radius;\r\n\t\t\tthis.outlineMaterial = new THREE.MeshBasicMaterial({ side: THREE.BackSide });\r\n\t\t\tthis.add(new THREE.Mesh(this.geometry.clone(), this.outlineMaterial));\r\n\r\n\t\t\tvar scale = 1 - (outline.width / radius);\r\n\t\t\tthis.geometry.scale(scale, scale, scale);\r\n\r\n\t\t\tthis.position.z = radius;\r\n\t\t}\r\n\t}\r\n\r\n\tupdateColor(player) {\r\n\t\tvar material = this.options.material;\r\n\t\tthis.material.setValues(player.team === 1 ? material.red : material.blue);\r\n\r\n\t\tvar outline = this.options.outline;\r\n\t\tif (outline && outline.enabled) {\r\n\t\t\tthis.outlineMaterial.setValues(player.team === 1 ? outline.red : outline.blue);\r\n\t\t}\r\n\t}\r\n\r\n\tupdatePosition(player) {\r\n\t\tthis.position.x = player.sprite.x;\r\n\t\tthis.position.z = player.sprite.y;\r\n\r\n\t\ttempQuaternion.setFromAxisAngle(AXIS_Y, -(player.a || 0) * this.options.rotationCoefficient);\r\n\t\tthis.quaternion.multiplyQuaternions(tempQuaternion, this.quaternion);\r\n\t}\r\n}\r\n\r\nfunction createPuckGeometry({ radius, holeRadius }, extrude) {\r\n\tvar shape = createPuckShape(radius, holeRadius);\r\n\tvar geometry = extrudeShape(shape, extrude, radius * 2);\r\n\r\n\treturn geometry;\r\n}\r\n\r\nfunction createPuckShape(radius, holeRadius) {\r\n\tvar shape = new THREE.Shape();\r\n\tshape.moveTo(radius, 0);\r\n\tshape.absarc(0, 0, radius, 0, 2 * Math.PI, false);\r\n\r\n\tif (holeRadius > 0) {\r\n\t\tvar hole = new THREE.Shape();\r\n\t\thole.moveTo(holeRadius, 0);\r\n\t\thole.absarc(0, 0, holeRadius, 0, 2 * Math.PI, true);\r\n\t\tshape.holes.push(hole);\r\n\t}\r\n\r\n\treturn shape;\r\n}","import * as THREE from 'three';\r\n\r\nvar material, geometry;\r\n\r\nexport default class Spike extends THREE.Mesh {\r\n\tconstructor(options = {}) {\r\n\t\tif (!geometry) geometry = createSpikeGeometry(options.geometry);\r\n\t\tif (!material) material = new THREE.MeshPhongMaterial(options.material);\r\n\r\n\t\tsuper(geometry, material);\r\n\r\n\t\tthis.name = 'spike';\r\n\t}\r\n}\r\n\r\nfunction createSpikeGeometry({ width = 32, segments = 6 } = {}) {\r\n\tvar geom = new THREE.SphereGeometry(width / 4, segments * 10);\r\n\r\n\tfor (var i = 0; i < geom.vertices.length; i += 10) {\r\n\t\tgeom.vertices[i].x = geom.vertices[i].x * 2;\r\n\t\tgeom.vertices[i].y = geom.vertices[i].y * 2;\r\n\t\tgeom.vertices[i].z = geom.vertices[i].z * 2;\r\n\t}\r\n\r\n\treturn geom;\r\n}\r\n","import * as THREE from 'three';\r\n\r\nimport Ball from './objects/ball';\r\nimport Bomb from './objects/bomb';\r\nimport Gate from './objects/gate';\r\nimport Puck from './objects/puck';\r\nimport Spike from './objects/spike';\r\n\r\nexport function createBall(player) {\r\n\tvar options = this.options;\r\n\r\n\tvar mesh = options.ballsArePucks ?\r\n\t\tnew Puck(options.objects.puck) :\r\n\t\tnew Ball(options.objects.ball);\r\n\r\n\tmesh.updateColor(player);\r\n\r\n\treturn mesh;\r\n}\r\n\r\nexport const objectMap = {\r\n\t7: function(obj = new Spike(this.options.objects.spike)) {\r\n\t\treturn obj;\r\n\t},\r\n\t9: function(obj = new Gate(this.options.objects.gate)) {\r\n\t\treturn obj.off();\r\n\t},\r\n\t9.1: function(obj = new Gate(this.options.objects.gate)) {\r\n\t\treturn obj.green();\r\n\t},\r\n\t9.2: function(obj = new Gate(this.options.objects.gate)) {\r\n\t\treturn obj.red();\r\n\t},\r\n\t9.3: function(obj = new Gate(this.options.objects.gate)) {\r\n\t\treturn obj.blue();\r\n\t},\r\n\t10: function(obj = new Bomb(this.options.objects.bomb)) {\r\n\t\treturn obj.show();\r\n\t},\r\n\t10.1: function(obj = new Bomb(this.options.objects.bomb)) {\r\n\t\treturn obj.hide();\r\n\t},\r\n};","import * as ClipperLib from 'clipper';\r\n\r\n// Simplifying API of jsclipper.\r\n\r\nexport const Clipper = ClipperLib.Clipper;\r\nexport const Lighten = ClipperLib.JS.Lighten;\r\nexport const Offset = ClipperLib.ClipperOffset;\r\nexport const PolyTree = ClipperLib.PolyTree;\r\nexport const PolyTreeToExPolygons = ClipperLib.JS.PolyTreeToExPolygons;\r\nexport const SimplifyPolygons = ClipperLib.Clipper.SimplifyPolygons;\r\n\r\nexport const ClipType = {\r\n\tIntersection: ClipperLib.ClipType.ctIntersection\r\n};\r\n\r\nexport const EndType = {\r\n\tClosedPolygon: ClipperLib.EndType.etClosedPolygon\r\n};\r\n\r\nexport const JoinType = {\r\n\tMiter: ClipperLib.JoinType.jtMiter\r\n};\r\n\r\nexport const PolyType = {\r\n\tSubject: ClipperLib.PolyType.ptSubject,\r\n\tClip: ClipperLib.PolyType.ptClip\r\n};\r\n\r\nexport const PolyFillType = {\r\n\tNonZero: ClipperLib.PolyFillType.pftNonZero\r\n};\r\n\r\nexport function SimplifyAndLighten(paths, lightenTolerance = 10) {\r\n\tpaths = SimplifyPolygons(paths, PolyFillType.NonZero);\r\n\tpaths = Lighten(paths, lightenTolerance);\r\n\r\n\treturn paths;\r\n}","import * as THREE from 'three';\r\n\r\nimport * as Clipper from '../lib/clipper';\r\nimport { textureLoader } from './utils';\r\n\r\nconst BL = 1.1; // ◣ bottom left\r\nconst TL = 1.2; // ◤ top left\r\nconst TR = 1.3; // ◥ top right\r\nconst BR = 1.4; // ◢ bottom right\r\n\r\nexport function createWalls(map, backgroundTextures, tilesImage) {\r\n\tvar params = this.options.objects.wall;\r\n\tvar extrude = params.extrude;\r\n\tvar tileSize = this.TILE_SIZE;\r\n\r\n\tvar chunkedShapes = createChunkedShapes(map, backgroundTextures, tileSize);\r\n\r\n\tvar geometry;\r\n\tchunkedShapes.forEach((chunk, index) => {\r\n\t\tvar options = Object.assign({\r\n\t\t\tUVGenerator: createUVGenerator(chunk, index + 1, 0),\r\n\t\t\tmaterial: index // NOTE: This doesn't work since THREE.js r74\r\n\t\t}, extrude);\r\n\r\n\t\tif (!geometry) {\r\n\t\t\tgeometry = new THREE.ExtrudeGeometry(chunk.shapes, options);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tgeometry.addShapeList(chunk.shapes, options);\r\n\t\t}\r\n\t});\r\n\r\n\r\n\tvar materials = backgroundTextures.map(({ texture }) => {\r\n\t\tlet opts = Object.assign({}, params.material, {\r\n\t\t\tmap: texture\r\n\t\t});\r\n\r\n\t\treturn new THREE.MeshPhongMaterial(opts);\r\n\t});\r\n\r\n\tlet opts = Object.assign({}, params.material, {\r\n\t\tmap: textureLoader.load(tilesImage)\r\n\t});\r\n\r\n\tvar tileMaterial = new THREE.MeshPhongMaterial(opts);\r\n\tmaterials.unshift(tileMaterial);\r\n\r\n\tvar material = new THREE.MultiMaterial(materials);\r\n\r\n\tvar mesh = new THREE.Mesh(geometry, material);\r\n\tmesh.name = 'walls';\r\n\tmesh.rotateX(Math.PI / 2);\r\n\tmesh.position.set(-tileSize / 2, extrude.amount, -tileSize / 2);\r\n\r\n\tthis.scene.add(mesh);\r\n\r\n\t// var edges = new THREE.EdgesHelper(mesh, 0x000000);\r\n\t// this.scene.add(edges);\r\n\r\n\treturn mesh;\r\n}\r\n\r\nfunction createUVGenerator({ x, y, width, height }, index, sideIndex) {\r\n\treturn {\r\n\t\tgenerateTopUV(geometry, indexA, indexB, indexC) {\r\n\t\t\tvar vertices = geometry.vertices;\r\n\t\t\tvar a = vertices[indexA];\r\n\t\t\tvar b = vertices[indexB];\r\n\t\t\tvar c = vertices[indexC];\r\n\r\n\t\t\t// HACK: THREE.js r74 removed material index for some reason, see their issue #7332 and commit 661ce3ad22...\r\n\t\t\tgeometry.faces[geometry.faces.length - 1].materialIndex = index;\r\n\r\n\t\t\treturn [\r\n\t\t\t\tnew THREE.Vector2((a.x - x) / width, 1 - (a.y - y) / height),\r\n\t\t\t\tnew THREE.Vector2((b.x - x) / width, 1 - (b.y - y) / height),\r\n\t\t\t\tnew THREE.Vector2((c.x - x) / height, 1 - (c.y - y) / height),\r\n\t\t\t];\r\n\t\t},\r\n\t\tgenerateSideWallUV(geometry, indexA, indexB, indexC, indexD) {\r\n\t\t\t// HACK: Set sidewall materialIndex\r\n\t\t\tvar len = geometry.faces.length - 1;\r\n\t\t\tgeometry.faces[len - 1].materialIndex = sideIndex;\r\n\t\t\tgeometry.faces[len].materialIndex = sideIndex;\r\n\r\n\t\t\tvar w = 16 * 40;\r\n\t\t\tvar h = 11 * 40;\r\n\r\n\t\t\tvar left = (5.5 * 40) / w;\r\n\t\t\tvar right = (6.5 * 40) / w;\r\n\t\t\tvar top = (5.5 * 40) / h;\r\n\t\t\tvar bottom = (6.5 * 40) / h;\r\n\r\n\t\t\treturn [\r\n\t\t\t\tnew THREE.Vector2(left, 1 - top),\r\n\t\t\t\tnew THREE.Vector2(left, 1 - bottom),\r\n\t\t\t\tnew THREE.Vector2(right, 1 - bottom),\r\n\t\t\t\tnew THREE.Vector2(right, 1 - top)\r\n\t\t\t];\r\n\t\t}\r\n\t};\r\n}\r\n\r\nfunction createChunkedShapes(map, textures, tileSize = 40) {\r\n\tvar paths = createPathsFromTileMap(map, tileSize);\r\n\tpaths = Clipper.SimplifyAndLighten(paths, tileSize / 4);\r\n\r\n\tvar clipper = new Clipper.Clipper();\r\n\r\n\tvar results = textures.map(({ x, y, width, height }) => {\r\n\t\tclipper.Clear();\r\n\r\n\t\tclipper.AddPaths(paths, Clipper.PolyType.Subject, true);\r\n\r\n\t\tlet clip = [\r\n\t\t\t{ X: x, Y: y },\r\n\t\t\t{ X: x + width, Y: y },\r\n\t\t\t{ X: x + width, Y: y + height },\r\n\t\t\t{ X: x, Y: y + height }\r\n\t\t];\r\n\r\n\t\tclipper.AddPaths([clip], Clipper.PolyType.Clip, true);\r\n\r\n\t\tvar result = new Clipper.PolyTree();\r\n\t\tclipper.Execute(Clipper.ClipType.Intersection, result);\r\n\r\n\t\tvar polygons = Clipper.PolyTreeToExPolygons(result);\r\n\r\n\t\tvar shapes = createThreeShapesFromExPolygons(polygons);\r\n\r\n\t\treturn {\r\n\t\t\tx,\r\n\t\t\ty,\r\n\t\t\twidth,\r\n\t\t\theight,\r\n\t\t\tshapes\r\n\t\t};\r\n\t});\r\n\r\n\treturn results;\r\n}\r\n\r\nfunction createThreeShapesFromExPolygons(polygons) {\r\n\treturn polygons.map(({ outer, holes }) => {\r\n\t\tvar shape = new THREE.Shape();\r\n\r\n\t\touter.forEach(({ X: x, Y: y }) => shape.moveTo(x, y));\r\n\r\n\t\tshape.holes = holes.map(hole => {\r\n\t\t\tvar holeShape = new THREE.Shape();\r\n\t\t\thole.forEach(({ X: x, Y: y }) => holeShape.moveTo(x, y));\r\n\r\n\t\t\treturn holeShape;\r\n\t\t});\r\n\r\n\t\treturn shape;\r\n\t});\r\n}\r\n\r\n// Output is either new PolyTree() or new Paths()\r\n// Get polygons with JS.PolyTreeToExPolygons()\r\nfunction dilutePaths(output, paths, delta = 0, miterLimit = 20, arcTolerance = 0.25) {\r\n\tvar co = new Clipper.Offset(miterLimit, arcTolerance);\r\n\tco.AddPaths(paths, Clipper.JoinType.Miter, Clipper.EndType.ClosedPolygon);\r\n\tco.Execute(output, delta);\r\n}\r\n\r\nfunction createPathsFromTileMap(map, tileSize) {\r\n\tvar height = map.length;\r\n\tvar width = map[0].length;\r\n\r\n\treturn map.reduce((mem, columns, x) => {\r\n\t\tvar left = x * tileSize;\r\n\t\tcolumns.forEach((tile, y) => {\r\n\t\t\tvar top = y * tileSize;\r\n\t\t\tif (tile === 1) {\r\n\t\t\t\tmem.push([\r\n\t\t\t\t\t{ X: left, Y: top },\r\n\t\t\t\t\t{ X: left + tileSize, Y: top },\r\n\t\t\t\t\t{ X: left + tileSize, Y: top + tileSize },\r\n\t\t\t\t\t{ X: left, Y: top + tileSize },\r\n\t\t\t\t]);\r\n\t\t\t}\r\n\t\t\telse if (tile === BL) {\r\n\t\t\t\tmem.push([\r\n\t\t\t\t\t{ X: left, Y: top },\r\n\t\t\t\t\t{ X: left + tileSize, Y: top + tileSize },\r\n\t\t\t\t\t{ X: left, Y: top + tileSize },\r\n\t\t\t\t]);\r\n\t\t\t}\r\n\t\t\telse if (tile === TL) {\r\n\t\t\t\tmem.push([\r\n\t\t\t\t\t{ X: left, Y: top },\r\n\t\t\t\t\t{ X: left + tileSize, Y: top },\r\n\t\t\t\t\t{ X: left, Y: top + tileSize },\r\n\t\t\t\t]);\r\n\t\t\t}\r\n\t\t\telse if (tile === TR) {\r\n\t\t\t\tmem.push([\r\n\t\t\t\t\t{ X: left, Y: top },\r\n\t\t\t\t\t{ X: left + tileSize, Y: top },\r\n\t\t\t\t\t{ X: left + tileSize, Y: top + tileSize },\r\n\t\t\t\t]);\r\n\t\t\t}\r\n\t\t\telse if (tile === BR) {\r\n\t\t\t\tmem.push([\r\n\t\t\t\t\t{ X: left, Y: top + tileSize },\r\n\t\t\t\t\t{ X: left + tileSize, Y: top },\r\n\t\t\t\t\t{ X: left + tileSize, Y: top + tileSize },\r\n\t\t\t\t]);\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn mem;\r\n\t}, []);\r\n}\r\n","import * as THREE from 'three';\r\n// import { extend } from 'jquery';\r\n\r\nimport { textureLoader as loader } from '../tagpro3d/utils';\r\n\r\nexport const ball = {\r\n\tvelocityCoefficient: 0.1,\r\n\trotationCoefficient: 0.015,\r\n\tgeometry: {\r\n\t\tradius: 19,\r\n\t\tdetail: 0\r\n\t},\r\n\tmaterial: {\r\n\t\tblue: {\r\n\t\t\tshading: THREE.FlatShading,\r\n\t\t\tcolor: 0x0000ff\r\n\t\t},\r\n\t\tred: {\r\n\t\t\tshading: THREE.FlatShading,\r\n\t\t\tcolor: 0xff0000\r\n\t\t}\r\n\t},\r\n\toutline: {\r\n\t\tenabled: true,\r\n\t\tdetail: 2,\r\n\t\twidth: 2,\r\n\t\tblue: {\r\n\t\t\tcolor: 0x0000bb\r\n\t\t},\r\n\t\tred: {\r\n\t\t\tcolor: 0xbb0000\r\n\t\t}\r\n\t}\r\n};\r\n\r\nexport const puck = {\r\n\trotationCoefficient: 0.01,\r\n\tgeometry: {\r\n\t\tradius: 19,\r\n\t\tholeRadius: 10\r\n\t},\r\n\textrude: {\r\n\t\tcurveSegments: 12,\r\n\t\tamount: 10,\r\n\t\tsteps: 1,\r\n\t\tbevelEnabled: true,\r\n\t\tbevelSegments: 1,\r\n\t\tbevelSize: 5,\r\n\t\tbevelThickness: 6,\r\n\t},\r\n\tmaterial: {\r\n\t\tblue: {\r\n\t\t\tshading: THREE.FlatShading,\r\n\t\t\tcolor: 0x0000ff,\r\n\t\t\topacity: 0.9\r\n\t\t},\r\n\t\tred: {\r\n\t\t\tshading: THREE.FlatShading,\r\n\t\t\tcolor: 0xff0000,\r\n\t\t\topacity: 0.9\r\n\t\t}\r\n\t},\r\n\toutline: {\r\n\t\tenabled: false,\r\n\t\twidth: 2,\r\n\t\tblue: {\r\n\t\t\tcolor: 0x0000ff\r\n\t\t},\r\n\t\tred: {\r\n\t\t\tcolor: 0xbb0000\r\n\t\t}\r\n\t}\r\n};\r\n\r\nexport const wall = {\r\n\tmaterial: {\r\n\t\tshading: THREE.FlatShading,\r\n\t\tcolor: 0xffffff,\r\n\t\t// opacity: 1.0,\r\n\t\t// transparent: true\r\n\t},\r\n\textrude: {\r\n\t\tamount: 40,\r\n\t\tsteps: 1,\r\n\t\tbevelEnabled: false,\r\n\t\tbevelSegments: 1,\r\n\t\tbevelSize: 5,\r\n\t\tbevelThickness: 10,\r\n\t}\r\n};\r\n\r\nexport const spike = {\r\n\tgeometry: {\r\n\t\twidth: 32,\r\n\t\tsegments: 6,\r\n\t},\r\n\tmaterial: {\r\n\t\tcolor: 0x666666,\r\n\t\topacity: 1\r\n\t}\r\n};\r\n\r\nexport const bomb = {\r\n\tmaterial: {\r\n\t\tbody: {\r\n\t\t\tcolor: 0x000000\r\n\t\t},\r\n\t\tshow: {\r\n\t\t\ttransparent: false,\r\n\t\t\topacity: 1.0\r\n\t\t},\r\n\t\thide: {\r\n\t\t\ttransparent: true,\r\n\t\t\topacity: 0.2\r\n\t\t}\r\n\t}\r\n};\r\n\r\nexport const button = {\r\n\tgeometry: {\r\n\t\twidth: 16,\r\n\t\theight: 10,\r\n\t\tsegments: 20\r\n\t},\r\n\tmaterial: {\r\n\t\tcolor: 0xa06e32,\r\n\t}\r\n};\r\n\r\nexport const flag = {\r\n\tanimate: false,\r\n\twidth: 40,\r\n\theight: 20,\r\n\twaveDepth: 4,\r\n\twidthSegments: 10,\r\n\theightSegments: 5,\r\n\trestDistance: 4\r\n};\r\n\r\nexport const gate = {\r\n\tgeometry: {\r\n\t\twidth: 40,\r\n\t},\r\n\tmaterial: {\r\n\t\toutline: {\r\n\t\t\tcolor: 0x333333,\r\n\t\t},\r\n\t\toff: {\r\n\t\t\ttransparent: true,\r\n\t\t\tcolor: 0x000000,\r\n\t\t\topacity: 0.0,\r\n\t\t},\r\n\t\tblue: {\r\n\t\t\tcolor: 0x0000ff,\r\n\t\t\topacity: 0.7,\r\n\t\t},\r\n\t\tgreen: {\r\n\t\t\tcolor: 0x00ff00,\r\n\t\t\topacity: 0.7,\r\n\t\t},\r\n\t\tred: {\r\n\t\t\tcolor: 0xff0000,\r\n\t\t\topacity: 0.7,\r\n\t\t}\r\n\t},\r\n\textrude: {\r\n\t\tamount: 40,\r\n\t\tbevelEnabled: true,\r\n\t\tbevelSegments: 1,\r\n\t\tbevelSize: 6,\r\n\t\tbevelThickness: 10,\r\n\t}\r\n};\r\n","import * as objects from './objects';\r\n\r\nexport default {\r\n\trenderer: {\r\n\t\tantialias: true,\r\n\t\talpha: true\r\n\t},\r\n\tcamera: {\r\n\t\tnear: 10,\r\n\t\tfar: 10000,\r\n\t\tdistance: 1000\r\n\t},\r\n\tlights: [\r\n\t\t{ enabled: false, type: 'camera', color: 0xffffff, intensity: 0.8 },\r\n\t\t{ enabled: true, type: 'ambient', color: 0x666666 },\r\n\t\t{ enabled: true, type: 'directional', color: 0xffffff, intensity: 1.0, position: [-500, 500, -500] },\r\n\t],\r\n\tobjects,\r\n\tballsArePucks: false,\r\n};\r\n","import * as THREE from 'three';\r\n\r\nimport * as lights from './lights';\r\nimport * as objects from './objects';\r\nimport * as utils from './utils';\r\nimport * as walls from './walls';\r\nimport options from '../options';\r\n\r\nexport default Object.assign({\r\n\tTILE_SIZE: 40,\r\n\tdynamicObjects: {},\r\n\toptions\r\n}, objects, utils, walls, lights);","import tagpro from 'tagpro';\r\nimport * as THREE from 'three';\r\n\r\nimport { after, addStyles } from './lib/utils';\r\nimport * as hacks from './lib/hacks';\r\nimport styles from './styles.css';\r\nimport t3d from './tagpro3d';\r\n\r\n// Extend tagpro.ready.after\r\ntagpro.ready.after = hacks.readyAfter.bind(null, tagpro);\r\n\r\n// HACK: for debugging\r\nwindow.t3d = t3d;\r\n\r\nfunction createRenderer3D() {\r\n\tconst TILE_SIZE = tagpro.TILE_SIZE;\r\n\r\n\ttagpro.tagpro3d = t3d;\r\n\r\n\tvar tr = tagpro.renderer;\r\n\r\n\t// Make game canvas transparent\r\n\ttr.options.transparent = true;\r\n\r\n\thacks.drawExtraFloors(tagpro);\r\n\r\n\t// Add styles\r\n\taddStyles(styles);\r\n\r\n\t// Draw extra tiles to the 2D background layer.\r\n\t// after(tr, 'drawBackgroundTiles', () => hacks.drawExtraTilesToBackground(tagpro));\r\n\r\n\tt3d.camera = t3d.createCamera(t3d.options.camera);\r\n\tt3d.scene = t3d.createScene();\r\n\tt3d.scene.add(t3d.camera);\r\n\r\n\t//\r\n\t// Renderer\r\n\t//\r\n\r\n\t// TODO: Find a sensible tagpro.renderer function to hook this stuff into\r\n\tafter(tr, 'drawStartingSplats', () => {\r\n\t\tt3d.addLights(t3d.options.lights, t3d.scene, t3d.camera);\r\n\t});\r\n\r\n\tafter(tr, 'createRenderer', function () {\r\n\t\tt3d.renderer = t3d.createRenderer(t3d.options.renderer);\r\n\t});\r\n\r\n\tafter(tr, 'render', function () {\r\n\t\tt3d.renderer.render(t3d.scene, t3d.camera);\r\n\t});\r\n\r\n\t//\r\n\t// Camera\r\n\t//\r\n\r\n\tafter(tr, 'centerView', function () {\r\n\t\tt3d.resizeCanvas(t3d.renderer, tr.canvas);\r\n\t\tt3d.updateCameraFOV(t3d.camera, tr.canvas);\r\n\t});\r\n\r\n\tafter(tr, 'centerContainerToPoint', function (x, y) {\r\n\t\tt3d.updateCameraPosition(t3d.camera, x, y);\r\n\t});\r\n\r\n\tvar zoom;\r\n\tafter(tr, 'updateCameraZoom', function () {\r\n\t\tif (zoom !== tagpro.zoom) {\r\n\t\t\tzoom = tagpro.zoom;\r\n\t\t\tt3d.updateCameraZoom(t3d.camera, zoom);\r\n\t\t}\r\n\t});\r\n\r\n\t//\r\n\t// Balls\r\n\t//\r\n\r\n\ttr.createBallSprite = function (player) {\r\n\t\tplayer.currentTeam = player.team;\r\n\r\n\t\tplayer.object3d = t3d.createBall(player);\r\n\t\tt3d.scene.add(player.object3d);\r\n\t};\r\n\r\n\ttr.updatePlayerColor = function (player) {\r\n\t\tif (player.team !== player.currentTeam) {\r\n\t\t\tplayer.currentTeam = player.team;\r\n\t\t\tplayer.object3d.updateColor(player);\r\n\t\t}\r\n\t};\r\n\r\n\tafter(tr, 'updatePlayerVisibility', function(player) {\r\n\t\tplayer.object3d.visible = player.sprite.visible;\r\n\t});\r\n\r\n\tafter(tr, 'updatePlayerSpritePosition', function (player) {\r\n\t\tplayer.object3d.updatePosition(player);\r\n\t});\r\n\r\n\tafter(tr, 'destroyPlayer', function (player) {\r\n\t\tt3d.scene.remove(player.object3d);\r\n\t\tdelete player.object3d;\r\n\t});\r\n\r\n\t//\r\n\t// Walls\r\n\t//\r\n\r\n\tafter(tr, 'createBackgroundTexture', (container) => {\r\n\t\tvar textures = t3d.mapBackgroundChunksToTextures(tr.backgroundChunks);\r\n\r\n\t\tt3d.createWalls(tagpro.map, textures, tagpro.tiles.image.src);\r\n\r\n\t\tvar plane = t3d.createBackgroundPlaneFromChunks(tr.backgroundChunks);\r\n\t\tt3d.scene.add(plane);\r\n\t\ttr.layers.background.visible = false;\r\n\t});\r\n\r\n\t//\r\n\t// Tiles\r\n\t//\r\n\r\n\tvar originalDrawDynamicTile = tr.drawDynamicTile;\r\n\ttr.drawDynamicTile = function (x, y) {\r\n\t\tvar tile = tagpro.map[x][y];\r\n\r\n\t\tvar createOrUpdateObject = t3d.objectMap[tile];\r\n\r\n\t\tif (!createOrUpdateObject) {\r\n\t\t\toriginalDrawDynamicTile(x, y);\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (!t3d.dynamicObjects[x]) {\r\n\t\t\tt3d.dynamicObjects[x] = {};\r\n\t\t}\r\n\r\n\t\tvar mesh = t3d.dynamicObjects[x][y];\r\n\r\n\t\tif (!mesh) {\r\n\t\t\tmesh = createOrUpdateObject.call(t3d);\r\n\r\n\t\t\t// NOTE: Some tiles are \"noops\", e.g. goal tiles\r\n\t\t\tif (!mesh)\r\n\t\t\t\treturn;\r\n\r\n\t\t\tmesh.position.set(x * TILE_SIZE, 0, y * TILE_SIZE);\r\n\t\t\tt3d.scene.add(mesh);\r\n\r\n\t\t\tt3d.dynamicObjects[x][y] = mesh;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tcreateOrUpdateObject.call(t3d, mesh);\r\n\t\t}\r\n\t};\r\n\r\n\tconsole.log('TagPro 3D Initialized.');\r\n}\r\n\r\ntagpro.ready(createRenderer3D);\r\n"],"names":["geometries.createRectangleGeometry","tempQuaternion","AXIS_Y","geometry","Clipper.SimplifyAndLighten","Clipper.Clipper","Clipper.PolyType","Clipper.PolyTree","Clipper.ClipType","Clipper.PolyTreeToExPolygons","hacks.readyAfter"],"mappings":"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"}